title: Apollo æºç è§£æ â€”â€” è°ƒè¯•ç¯å¢ƒæ­å»º
date: 2018-03-01
tags:
categories: Apollo
permalink: Apollo/build-debugging-environment
wechat_url:
toutiao_url: https://www.toutiao.com/i6634407735502832142/

---

æ‘˜è¦: åŸåˆ›å‡ºå¤„ http://www.iocoder.cn/Apollo/build-debugging-environment/ ã€ŒèŠ‹é“æºç ã€æ¬¢è¿è½¬è½½ï¼Œä¿ç•™æ‘˜è¦ï¼Œè°¢è°¢ï¼

- [1. ä¾èµ–å·¥å…·](http://www.iocoder.cn/Apollo/build-debugging-environment/)
- [2. åˆ›å»ºæ•°æ®åº“](http://www.iocoder.cn/Apollo/build-debugging-environment/)
  - [2.1 åˆ›å»º ApolloPortalDB](http://www.iocoder.cn/Apollo/build-debugging-environment/)
  - [2.2 åˆ›å»º ApolloConfigDB](http://www.iocoder.cn/Apollo/build-debugging-environment/)
- [3. ConfigService && AdminService](http://www.iocoder.cn/Apollo/build-debugging-environment/)
- [4. PortalService](http://www.iocoder.cn/Apollo/build-debugging-environment/)
- [5. Demo](http://www.iocoder.cn/Apollo/build-debugging-environment/)
- [666. å½©è›‹](http://www.iocoder.cn/Apollo/build-debugging-environment/)

-------

![](http://www.iocoder.cn/images/common/wechat_mp_2018_05_18.jpg)

> ğŸ™‚ğŸ™‚ğŸ™‚å…³æ³¨**å¾®ä¿¡å…¬ä¼—å·ï¼šã€èŠ‹é“æºç ã€‘**æœ‰ç¦åˆ©ï¼š  
> 1. RocketMQ / MyCAT / Sharding-JDBC **æ‰€æœ‰**æºç åˆ†ææ–‡ç« åˆ—è¡¨  
> 2. RocketMQ / MyCAT / Sharding-JDBC **ä¸­æ–‡æ³¨é‡Šæºç  GitHub åœ°å€**  
> 3. æ‚¨å¯¹äºæºç çš„ç–‘é—®æ¯æ¡ç•™è¨€**éƒ½**å°†å¾—åˆ°**è®¤çœŸ**å›å¤ã€‚**ç”šè‡³ä¸çŸ¥é“å¦‚ä½•è¯»æºç ä¹Ÿå¯ä»¥è¯·æ•™å™¢**ã€‚  
> 4. **æ–°çš„**æºç è§£ææ–‡ç« **å®æ—¶**æ”¶åˆ°é€šçŸ¥ã€‚**æ¯å‘¨æ›´æ–°ä¸€ç¯‡å·¦å³**ã€‚  
> 5. **è®¤çœŸçš„**æºç äº¤æµå¾®ä¿¡ç¾¤ã€‚

-------

# 1. ä¾èµ–å·¥å…·

> è€è‰¿è‰¿ï¼šæœ¬æ–‡å‚è€ƒ [ã€ŠApollo å®˜æ–¹æ–‡æ¡£ â€”â€” å¼€å‘æŒ‡å—ã€‹](https://github.com/ctripcorp/apollo/wiki/Apollo%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97) ï¼Œè¿›è¡Œç²¾ç®€ã€‚  
> å®˜æ–¹å¾ˆè‰¯å¿ƒï¼Œæ–‡æ¡£å¾ˆç»†å¿ƒã€‚
> 
> å»ºè®®èƒ–å‹**åé¢**é˜…è¯» Apollo **è®¾è®¡æ–‡æ¡£**ï¼š
> 
> * [ã€ŠApollo é…ç½®ä¸­å¿ƒä»‹ç»ã€‹](https://github.com/ctripcorp/apollo/wiki/Apollo%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E4%BB%8B%E7%BB%8D)
> * [ã€ŠApollo é…ç½®ä¸­å¿ƒè®¾è®¡ã€‹](https://github.com/ctripcorp/apollo/wiki/Apollo%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E8%AE%BE%E8%AE%A1)
> * [ã€ŠApolloæ ¸å¿ƒæ¦‚å¿µä¹‹â€œNamespaceâ€ã€‹](https://github.com/ctripcorp/apollo/wiki/Apollo%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E4%B9%8B%E2%80%9CNamespace%E2%80%9D)

* JDK ï¼š1.8+
* MySQL ï¼š5.6.5+
* Maven
* IntelliJ IDEA

# 2. åˆ›å»ºæ•°æ®åº“

Apollo æœåŠ¡ç«¯å…±æœ‰ä¸¤ä¸ªæ•°æ®åº“ï¼š

* ApolloPortalDB
* ApolloConfigDB

åœ¨ Apollo é¡¹ç›®ä¸‹çš„  `scripts` ç›®å½•ï¼Œæä¾›äº†å¯¹åº”çš„åˆå§‹åŒ–è„šæœ¬ï¼š![scripts](http://www.iocoder.cn/images/Apollo/2018_03_01/01.png)

## 2.1 åˆ›å»º ApolloPortalDB

é€šè¿‡å„ç§ MySQL å®¢æˆ·ç«¯å¯¼å…¥ `sql/apolloportaldb.sql` è„šæœ¬ã€‚ä¾‹å¦‚ç¬”è€…å–œæ¬¢ç”¨ Navicat ã€‚

> åŸºæƒ…æç¤ºï¼šNavicat å¯¼å…¥ SQL è„šæœ¬ï¼Œå¯é˜…è¯»æ–‡ç« ï¼š[ã€Šnavicaté‡Œå¯¼å…¥å’Œå¯¼å‡º.sqlæ–‡ä»¶ã€‹](https://blog.csdn.net/longshenlmj/article/details/17379217) ã€‚

å¯¼å…¥æˆåŠŸåï¼Œè¡¨ç»“æ„å¦‚ä¸‹ï¼š![è¡¨ç»“æ„](http://www.iocoder.cn/images/Apollo/2018_03_01/02.png)

## 2.2 åˆ›å»º ApolloConfigDB

é€šè¿‡å„ç§ MySQL å®¢æˆ·ç«¯å¯¼å…¥ `sql/apolloconfigdb.sql` è„šæœ¬ã€‚

å¯¼å…¥æˆåŠŸåï¼Œè¡¨ç»“æ„å¦‚ä¸‹ï¼š![è¡¨ç»“æ„](http://www.iocoder.cn/images/Apollo/2018_03_01/03.png)

# 3. ConfigService && AdminService

**åŒæ—¶å¯åŠ¨ `apollo-adminservice` å’Œ `apollo-configservice` é¡¹ç›®ï¼ŒåŸºäº `apollo-assembly` é¡¹ç›®æ¥å¯åŠ¨**ã€‚

1ã€æ–°å»º **IDEA Application** ![æ–°å»º Application](http://www.iocoder.cn/images/Apollo/2018_03_01/04.png)

2ã€é…ç½® **IDEA Application** ![é…ç½® Application](http://www.iocoder.cn/images/Apollo/2018_03_01/05.png)

* **Main class** ï¼š`com.ctrip.framework.apollo.assembly.ApolloApplication` ã€‚
* **VM options** ï¼š

    > -Dapollo_profile=github  
    > -Dspring.datasource.url=jdbc:mysql://localhost:33061/ApolloConfigDB?  characterEncoding=utf8  
    > -Dspring.datasource.username=root  
    > -Dspring.datasource.password=123456  
    > -Dlogging.file=/Users/yunai/apollo-assembly.log  

    * **spring.datasource**  é…ç½®è¿æ¥ **ApolloConfigDB** æ•°æ®åº“ã€‚
    * **loggine.file** é…ç½®æ—¥å¿—è¾“å‡ºæ–‡ä»¶ã€‚

* **Use classpath of  module** ï¼š`apollo-assembly` ã€‚

3ã€å¯åŠ¨ **IDEA Application** ![å¯åŠ¨ Application](http://www.iocoder.cn/images/Apollo/2018_03_01/06.png)

å¯åŠ¨æ—¶é—´éœ€è¦ 3 åˆ†é’Ÿå·¦å³ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚å½“æ‰“å¼€ http://localhost:8080/ çœ‹åˆ° APOLLO-ADMINSERVICE å’Œ APOLLO-CONFIGSERVICE æ³¨å†Œåˆ° Eureka ä¸­ï¼Œä»£è¡¨å¯åŠ¨æˆåŠŸã€‚![http://localhost:8080/](http://www.iocoder.cn/images/Apollo/2018_03_01/07.png)

# 4. PortalService

1ã€æ–°å»º **IDEA Application**

2ã€é…ç½® **IDEA Application** ![é…ç½® Application](http://www.iocoder.cn/images/Apollo/2018_03_01/08.png)

* **Main class** ï¼š`com.ctrip.framework.apollo.portal.PortalApplication` ã€‚
* **VM options** ï¼š

    > -Dapollo_profile=github,auth  
    > -Ddev_meta=http://localhost:8080/  
    > -Dserver.port=8070  
    > -Dspring.datasource.url=jdbc:mysql://localhost:3306/ApolloPortalDB?characterEncoding=utf8  
    > -Dspring.datasource.username=root  
    > -Dspring.datasource.password=  
    > -Dlogging.file=/Users/yunai/apollo-portal.log 

    * **spring.datasource**  é…ç½®è¿æ¥ **ApolloPortalDB** æ•°æ®åº“ã€‚
    * **loggine.file** é…ç½®æ—¥å¿—è¾“å‡ºæ–‡ä»¶ã€‚

* **Use classpath of  module** ï¼š`apollo-portal` ã€‚

> å†…ç½®è´¦å·
>
> * username ï¼šApollo
> * password ï¼šadmin

3ã€å¯åŠ¨ **IDEA Application** 

å¯åŠ¨æ—¶é—´å¾ˆå¿«ã€‚å½“æ‰“å¼€ http://localhost:8070/ ã€‚![http://localhost:8070/](http://www.iocoder.cn/images/Apollo/2018_03_01/09.png)

# 5. Demo

è€ƒè™‘åˆ°ä¸‹é¢çš„æµ‹è¯•ï¼Œéœ€è¦åˆ›å»º**æµ‹è¯•**çš„åº”ç”¨ï¼Œç¼–å·ä¸º **100004458** ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š![100004458](http://www.iocoder.cn/images/Apollo/2018_03_01/10.png)

-------

1ã€æ–°å»º **IDEA Application**

2ã€é…ç½® **IDEA Application** ![é…ç½® Application](http://www.iocoder.cn/images/Apollo/2018_03_01/11.png)

* **Main class** ï¼š`com.ctrip.framework.apollo.demo.api.SimpleApolloConfigDemo` ã€‚
* **VM options** ï¼š

    > -Denv=dev  
    > -Ddev_meta=http://localhost:8080

* **Use classpath of  module** ï¼š`apollo-demo` ã€‚

3ã€å¯åŠ¨ **IDEA Application**

* æˆåŠŸåï¼Œè¾“å‡ºæ—¥å¿—å¦‚ä¸‹ï¼š

    ```Java
    Apollo Config Demo. Please input key to get the value. Input quit to exit.
    ```

* è¾“å…¥ `"timeout"` ï¼Œå›è½¦ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š

    ```Java
    timeout
    > [apollo-demo][main]2018-04-22 11:12:43,345 INFO  [com.ctrip.framework.apollo.demo.api.SimpleApolloConfigDemo] Loading key : timeout with value: 6666
    ```  
    
    * æ­¤å¤„ä¾¿æ˜¯æˆ‘ä»¬åœ¨ Apollo Portal  ä¸­é…ç½®çš„ `"timeout"` å€¼ã€‚

# 666. å½©è›‹

å®˜æ–¹æ–‡æ¡£çœŸçš„æ˜¯å®Œå–„ã€‚æ­å»ºç¯å¢ƒ + å†™æ–‡ç« ï¼ŒåªèŠ±äº† 3 ä¸ªå°æ—¶å·¦å³ã€‚

å¦å¤–ï¼Œæœ¬æ–‡å†™çš„æ¯”è¾ƒç®€å•ï¼Œè¯¦ç»†çš„å»ºè®®å¤šçœ‹çœ‹å®˜æ–¹æ–‡æ¡£ã€‚

![çŸ¥è¯†æ˜Ÿçƒ](http://www.iocoder.cn/images/Architecture/2017_12_29/01.png)

