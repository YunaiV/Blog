title: RocketMQ å…¥é—¨ â€”â€” å®‰è£…ä»¥åŠå¿«é€Ÿå…¥é—¨
date: 2020-01-04
tags:
categories: RocketMQ
permalink: RocketMQ/start/install
author: zhisheng
from_url: http://www.54tianzhisheng.cn/2018/02/06/RocketMQ-install/

-------

æ‘˜è¦: åŸåˆ›å‡ºå¤„ http://www.54tianzhisheng.cn/2018/02/06/RocketMQ-install/ ã€Œzhishengã€æ¬¢è¿è½¬è½½ï¼Œä¿ç•™æ‘˜è¦ï¼Œè°¢è°¢ï¼

- [å®‰è£…æ¡ä»¶](http://www.iocoder.cn/RocketMQ/start/install/)
- [ä¸‹è½½å’Œæ„å»º](http://www.iocoder.cn/RocketMQ/start/install/)
- [å¯åŠ¨ NameServer](http://www.iocoder.cn/RocketMQ/start/install/)
- [å¯åŠ¨ Broker](http://www.iocoder.cn/RocketMQ/start/install/)
- [å‘é€å’Œæ¥æ”¶æ¶ˆæ¯](http://www.iocoder.cn/RocketMQ/start/install/)
  - [å‘é€æ¶ˆæ¯](http://www.iocoder.cn/RocketMQ/start/install/)
  - [æ¥æ”¶æ¶ˆæ¯](http://www.iocoder.cn/RocketMQ/start/install/)
- [å…³é—­æœåŠ¡å™¨](http://www.iocoder.cn/RocketMQ/start/install/)
- [å¸¸ç”¨å‘½ä»¤](http://www.iocoder.cn/RocketMQ/start/install/)
- [æ€»ç»“](http://www.iocoder.cn/RocketMQ/start/install/)

-------

![](http://www.iocoder.cn/images/common/wechat_mp_2017_07_31.jpg)

> ğŸ™‚ğŸ™‚ğŸ™‚å…³æ³¨**å¾®ä¿¡å…¬ä¼—å·ï¼šã€èŠ‹é“æºç ã€‘**æœ‰ç¦åˆ©ï¼š
> 1. RocketMQ / MyCAT / Sharding-JDBC **æ‰€æœ‰**æºç åˆ†ææ–‡ç« åˆ—è¡¨
> 2. RocketMQ / MyCAT / Sharding-JDBC **ä¸­æ–‡æ³¨é‡Šæºç  GitHub åœ°å€**
> 3. æ‚¨å¯¹äºæºç çš„ç–‘é—®æ¯æ¡ç•™è¨€**éƒ½**å°†å¾—åˆ°**è®¤çœŸ**å›å¤ã€‚**ç”šè‡³ä¸çŸ¥é“å¦‚ä½•è¯»æºç ä¹Ÿå¯ä»¥è¯·æ•™å™¢**ã€‚
> 4. **æ–°çš„**æºç è§£ææ–‡ç« **å®æ—¶**æ”¶åˆ°é€šçŸ¥ã€‚**æ¯å‘¨æ›´æ–°ä¸€ç¯‡å·¦å³**ã€‚
> 5. **è®¤çœŸçš„**æºç äº¤æµå¾®ä¿¡ç¾¤ã€‚

-------

# å®‰è£…æ¡ä»¶

1. 64ä½æ“ä½œç³»ç»Ÿï¼Œå»ºè®®ä½¿ç”¨ Linux / Unix / Mac;
2. 64ä½JDK 1.8+;
3. Maven 3.2.x

# ä¸‹è½½å’Œæ„å»º

ä» <https://www.apache.org/dyn/closer.cgi?path=rocketmq/4.2.0/rocketmq-all-4.2.0-source-release.zip> ä¸‹è½½ 4.2.0 çš„æºç ç‰ˆæœ¬ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥è§£å‹4.2.0æºç ç‰ˆæœ¬å¹¶æ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶ã€‚

```Bash
unzip rocketmq-all-4.2.0-source-release.zip

cd rocketmq-all-4.2.0/

mvn -Prelease-all -DskipTests clean install -U
```

æ„å»ºæˆåŠŸå¦‚ä¸‹ï¼š

![2018-02-07_14-04-25](https://ws2.sinaimg.cn/large/006tNc79gy1fo7ukit9wbj31kw14o7l8.jpg)

è¿›å…¥åˆ°ç›®å½• ï¼š

```Bash
cd distribution/target/apache-rocketmq
```

# å¯åŠ¨ NameServer

```
nohup sh bin/mqnamesrv &

tail -f ~/logs/rocketmqlogs/namesrv.log
```

ç»“æœå¦‚ä¸‹å°±ä»£è¡¨å¯åŠ¨æˆåŠŸäº†ï¼š

![rocketmq01](https://ws4.sinaimg.cn/large/006tKfTcgy1fo5pxzbap2j31kw0h413p.jpg)

# å¯åŠ¨ Broker

```Bash
nohup sh bin/mqbroker -n localhost:9876 &

tail -f ~/logs/rocketmqlogs/broker.log
```

ç»“æœå¦‚ä¸‹å°±ä»£è¡¨å¯åŠ¨æˆåŠŸäº†ï¼šä»æ—¥å¿—ä¸­å¯ä»¥çœ‹åˆ° broker æ³¨å†Œåˆ°äº† nameserver ä¸Šäº†ï¼ˆlocalhost:9876ï¼‰

![rocketmq02](https://ws2.sinaimg.cn/large/006tKfTcgy1fo5pxt2wavj31kw0jeqi0.jpg)

# å‘é€å’Œæ¥æ”¶æ¶ˆæ¯

åœ¨å‘é€/æ¥æ”¶æ¶ˆæ¯ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰å®¢æˆ·åç§°æœåŠ¡å™¨çš„ä½ç½®ã€‚RocketMQ æä¾›äº†å¤šç§æ–¹æ³•æ¥å®ç°è¿™ä¸€ç‚¹ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬ä½¿ç”¨ç¯å¢ƒå˜é‡`NAMESRV_ADDR`

## å‘é€æ¶ˆæ¯

```Bash
export NAMESRV_ADDR=localhost:9876

sh bin/tools.sh org.apache.rocketmq.example.quickstart.Producer
```

![rocketmq03](https://ws3.sinaimg.cn/large/006tKfTcgy1fo5py0e7lgj31kw0d47j2.jpg)

## æ¥æ”¶æ¶ˆæ¯

```Bash
sh bin/tools.sh org.apache.rocketmq.example.quickstart.Consumer
```

![rocketmq04](https://ws2.sinaimg.cn/large/006tKfTcgy1fo5pxwox08j31kw0rib29.jpg)

# å…³é—­æœåŠ¡å™¨

```Bash
sh bin/mqshutdown broker	//åœæ­¢ broker

sh bin/mqshutdown namesrv	//åœæ­¢ nameserver
```

å…³é—­æˆåŠŸåå¦‚ä¸‹ï¼š

![rocketmq05](https://ws4.sinaimg.cn/large/006tKfTcgy1fo5pxsgyywj31kw0b5dov.jpg)

# å¸¸ç”¨å‘½ä»¤

ä¸Šé¢å‡ ä¸ªå¯åŠ¨å’Œå…³é—­ name server å’Œ broker çš„å°±ä¸å†è¯´äº†ï¼Œ

- æŸ¥çœ‹é›†ç¾¤æƒ…å†µ `./mqadmin clusterList -n 127.0.0.1:9876`
- æŸ¥çœ‹ broker çŠ¶æ€ `./mqadmin brokerStatus -n 127.0.0.1:9876 -b 172.20.1.138:10911` (æ³¨æ„æ¢æˆä½ çš„ broker åœ°å€)
- æŸ¥çœ‹ topic åˆ—è¡¨ `./mqadmin topicList -n 127.0.0.1:9876`
- æŸ¥çœ‹ topic çŠ¶æ€ `./mqadmin topicStatus -n 127.0.0.1:9876 -t MyTopic` (æ¢æˆä½ æƒ³æŸ¥è¯¢çš„ topic)
- æŸ¥çœ‹ topic è·¯ç”± `./mqadmin topicRoute -n 127.0.0.1:9876 -t MyTopic`

# æ€»ç»“

æœ¬æ–‡æ˜¯ RocketMQ çš„å®‰è£…åŠå¿«é€Ÿå…¥é—¨æ¡ˆä¾‹ã€‚