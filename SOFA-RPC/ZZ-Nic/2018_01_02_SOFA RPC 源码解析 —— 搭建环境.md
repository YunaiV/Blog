title: SOFA RPC æºç è§£æ â€”â€” æ­å»ºç¯å¢ƒ
date: 2018-01-02
tag:
categories: SOFA RPC
permalink: SOFARPC/Nic/build-debugging-environment
author: é‹’Nic
from_url: https://www.jianshu.com/p/1eeee833bd5d
wechat_url: 

-------

æ‘˜è¦: åŸåˆ›å‡ºå¤„ https://www.jianshu.com/p/1eeee833bd5d ã€Œé‹’Nicã€æ¬¢è¿è½¬è½½ï¼Œä¿ç•™æ‘˜è¦ï¼Œè°¢è°¢ï¼

-------

![](http://www.iocoder.cn/images/common/wechat_mp_2017_07_31.jpg)

> ğŸ™‚ğŸ™‚ğŸ™‚å…³æ³¨**å¾®ä¿¡å…¬ä¼—å·ï¼šã€èŠ‹é“æºç ã€‘**æœ‰ç¦åˆ©ï¼š
> 1. RocketMQ / MyCAT / Sharding-JDBC **æ‰€æœ‰**æºç åˆ†ææ–‡ç« åˆ—è¡¨
> 2. RocketMQ / MyCAT / Sharding-JDBC **ä¸­æ–‡æ³¨é‡Šæºç  GitHub åœ°å€**
> 3. æ‚¨å¯¹äºæºç çš„ç–‘é—®æ¯æ¡ç•™è¨€**éƒ½**å°†å¾—åˆ°**è®¤çœŸ**å›å¤ã€‚**ç”šè‡³ä¸çŸ¥é“å¦‚ä½•è¯»æºç ä¹Ÿå¯ä»¥è¯·æ•™å™¢**ã€‚
> 4. **æ–°çš„**æºç è§£ææ–‡ç« **å®æ—¶**æ”¶åˆ°é€šçŸ¥ã€‚**æ¯å‘¨æ›´æ–°ä¸€ç¯‡å·¦å³**ã€‚
> 5. **è®¤çœŸçš„**æºç äº¤æµå¾®ä¿¡ç¾¤ã€‚

-------

**ç®€ä»‹æ‘˜è¦**

 SOFA æ˜¯èš‚èšé‡‘æœè‡ªä¸»ç ”å‘çš„é‡‘èçº§åˆ†å¸ƒå¼ä¸­é—´ä»¶ï¼ŒåŒ…å«æ„å»ºé‡‘èçº§äº‘åŸç”Ÿæ¶æ„æ‰€éœ€çš„å„ä¸ªç»„ä»¶ï¼ŒåŒ…æ‹¬å¾®æœåŠ¡ç ”å‘æ¡†æ¶ï¼ŒRPC æ¡†æ¶ï¼ŒæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œåˆ†å¸ƒå¼å®šæ—¶ä»»åŠ¡ï¼Œé™æµ/ç†”æ–­æ¡†æ¶ï¼ŒåŠ¨æ€é…ç½®æ¨é€ï¼Œåˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªï¼ŒMetricsç›‘æ§åº¦é‡ï¼Œåˆ†å¸ƒå¼é«˜å¯ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶ï¼Œåˆ†å¸ƒå¼æ•°æ®åº“ä»£ç†å±‚ç­‰ç»„ä»¶ï¼Œæ˜¯ä¸€å¥—åˆ†å¸ƒå¼æ¶æ„çš„å®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿæ˜¯åœ¨é‡‘èåœºæ™¯é‡Œé”¤ç‚¼å‡ºæ¥çš„æœ€ä½³å®è·µã€‚
 SOFARPCæ˜¯èš‚èšé‡‘æœå¼€æºçš„é«˜å¯æ‰©å±•æ€§ã€é«˜æ€§èƒ½ã€ç”Ÿäº§çº§çš„Java RPCæ¡†æ¶ã€‚SOFARPCè‡´åŠ›äºç®€åŒ–åº”ç”¨ä¹‹é—´çš„RPCè°ƒç”¨ï¼Œä¸ºåº”ç”¨æä¾›æ–¹ä¾¿é€æ˜ã€ç¨³å®šé«˜æ•ˆçš„ç‚¹å¯¹ç‚¹è¿œç¨‹æœåŠ¡è°ƒç”¨æ–¹æ¡ˆã€‚ä¸ºäº†ç”¨æˆ·å’Œå¼€å‘è€…æ–¹ä¾¿çš„è¿›è¡ŒåŠŸèƒ½æ‰©å±•ï¼ŒSOFARPCæä¾›ä¸°å¯Œçš„æ¨¡å‹æŠ½è±¡å’Œå¯æ‰©å±•æ¥å£ï¼ŒåŒ…æ‹¬è¿‡æ»¤å™¨ã€è·¯ç”±ã€è´Ÿè½½å‡è¡¡ç­‰ç­‰ã€‚
 SOFARPCåŠŸèƒ½ç‰¹æ€§ï¼š(1)é€æ˜åŒ–ã€é«˜æ€§èƒ½çš„è¿œç¨‹æœåŠ¡è°ƒç”¨ï¼›(2)æ”¯æŒå¤šç§æœåŠ¡è·¯ç”±åŠè´Ÿè½½å‡è¡¡ç­–ç•¥ï¼›(3)æ”¯æŒå¤šç§æ³¨å†Œä¸­å¿ƒçš„é›†æˆï¼›(4)æ”¯æŒå¤šç§åè®®ï¼›(5)æ”¯æŒåŒæ­¥ã€å•å‘ã€å›è°ƒã€æ³›åŒ–ç­‰å¤šç§è°ƒç”¨æ–¹å¼ï¼›(6)æ”¯æŒé›†ç¾¤å®¹é”™ã€æœåŠ¡é¢„çƒ­ã€è‡ªåŠ¨æ•…éšœéš”ç¦»ï¼›(7)å¼ºå¤§çš„æ‰©å±•åŠŸèƒ½ï¼Œå¯ä»¥æŒ‰éœ€æ‰©å±•å„ä¸ªåŠŸèƒ½ç»„ä»¶ã€‚
 SOFARPC Githubï¼š<https://github.com/alipay/sofa-rpc>
 **æ¶æ„è®¾è®¡**
 SOFARPCä»ä¸‹åˆ°ä¸Šåˆ†ä¸ºä¸¤å±‚ï¼šæ ¸å¿ƒå±‚ï¼šåŒ…å«RPC çš„æ ¸å¿ƒç»„ä»¶(ä¾‹å¦‚æˆ‘ä»¬çš„å„ç§æ¥å£ã€APIã€å…¬å…±åŒ…)ä»¥åŠä¸€äº›é€šç”¨çš„å®ç°(ä¾‹å¦‚éšæœºç­‰è´Ÿè½½å‡è¡¡ç®—æ³•)ã€‚åŠŸèƒ½å®ç°å±‚ï¼šæ‰€æœ‰çš„åŠŸèƒ½å®ç°å±‚çš„ç”¨æˆ·éƒ½æ˜¯å¹³ç­‰çš„ï¼Œéƒ½æ˜¯åŸºäºæ‰©å±•æœºåˆ¶å®ç°çš„ã€‚



![img](https:////upload-images.jianshu.io/upload_images/6739367-22cef7dd1ae2c875.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/569/format/jpeg)

æ¶æ„ç»„ä»¶



![img](https:////upload-images.jianshu.io/upload_images/6739367-81114a97cf791303.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/878/format/jpeg)

æ¡†æ¶åŸç†

SOFARPCæºç ä¸»è¦æ¨¡å—åŒ…æ‹¬all(å‘å¸ƒæ‰“åŒ…æ¨¡å—)ï¼Œbom(ä¾èµ–ç®¡æ§æ¨¡å—ï¼Œç”¨äºä¾èµ–ç‰ˆæœ¬ç®¡æ§)ï¼Œexample(ç¤ºä¾‹æ¨¡å—)ï¼Œtest(æµ‹è¯•æ¨¡å—ï¼ŒåŒ…å«é›†æˆæµ‹è¯•)ï¼Œcore(apiï¼šAPIæ¨¡å—ï¼Œæ¶µç›–å„ç§åŸºæœ¬æµç¨‹æ¥å£ã€æ¶ˆæ¯ã€ä¸Šä¸‹æ–‡ã€æ‰©å±•æ¥å£ç­‰ï¼›commonï¼šcommon å…¬å…±æ¨¡å—ï¼Œæ¶µç›–å·¥å…·ç±»utilsã€æ•°æ®ç»“æ„ï¼›exceptionï¼šå¼‚å¸¸æ¨¡å—ï¼Œæ¶µç›–å„ç§å¼‚å¸¸æ¥å£æ¥å£ç­‰)ã€‚å…¶ä¸­coreæ¨¡å—åŒ…æ‹¬bootstrap(å¯åŠ¨å®ç°æ¨¡å—ï¼Œç”¨äºå¯åŠ¨ç±»ï¼Œå‘å¸ƒæˆ–è€…å¼•ç”¨æœåŠ¡é€»è¾‘ã€ä»¥åŠregistryçš„æ“ä½œ)ï¼Œproxy(ä»£ç†å®ç°æ¨¡å—ï¼Œç”¨äºæ¥å£å®ç°ä»£ç†ç”Ÿæˆ)ï¼Œclient(å®¢æˆ·ç«¯å®ç°æ¨¡å—ï¼Œç”¨äºå‘é€è¯·æ±‚ã€æ¥æ”¶å“åº”ã€è¿æ¥ç»´æŠ¤ã€è·¯ç”±ã€è´Ÿè½½å‡è¡¡ã€åŒæ­¥å¼‚æ­¥ç­‰)ï¼Œserver(æœåŠ¡ç«¯å®ç°æ¨¡å—ï¼Œç”¨äºå¯åŠ¨ç›‘å¬ã€æ¥æ”¶è¯·æ±‚ï¼Œå‘é€å“åº”ã€ä¸šåŠ¡çº¿ç¨‹åˆ†å‘ç­‰)ï¼Œfilter(æ‹¦æˆªå™¨å®ç°æ¨¡å—ï¼Œç”¨äºæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„å„ç§æ‹¦æˆªå™¨å®ç°)ï¼Œcodec(ç¼–è§£ç å®ç°æ¨¡å—ï¼Œä¾‹å¦‚å‹ç¼©ï¼Œåºåˆ—åŒ–ç­‰)ï¼Œprotocol(åè®®å®ç°æ¨¡å—ï¼Œç”¨äºåè®®çš„åŒ…è£…å¤„ç†ã€åå•†)ï¼Œtransport(ç½‘ç»œä¼ è¾“å®ç°æ¨¡å—ï¼Œç”¨äºTCPè¿æ¥çš„å»ºç«‹ï¼Œæ•°æ®åˆ†åŒ…ç²˜åŒ…å¤„ç†ï¼Œè¯·æ±‚å“åº”å¯¹è±¡åˆ†å‘ç­‰)ï¼Œregistry(æ³¨å†Œä¸­å¿ƒå®ç°æ¨¡å— å®ç°æ³¨å†Œä¸­å¿ƒï¼Œä¾‹å¦‚zkç­‰)ã€‚



![img](https:////upload-images.jianshu.io/upload_images/6739367-0ecdcd950535de1f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/502/format/jpeg)

æºç æ¨¡å—



![img](https:////upload-images.jianshu.io/upload_images/6739367-5f0e0a435d8a56c8.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/jpeg)

é¡¹ç›®ç»“æ„

SOFA RPCæä¾›åº”ç”¨ä¹‹é—´çš„ç‚¹å¯¹ç‚¹æœåŠ¡è°ƒç”¨åŠŸèƒ½ï¼Œå…·æœ‰é«˜å¯ä¼¸ç¼©æ€§ã€é«˜å®¹é”™æ€§çš„ç‰¹æ€§ã€‚ä¸ºäº†ä¿è¯é«˜å¯ç”¨æ€§ï¼Œé€šå¸¸åŒä¸€ä¸ªåº”ç”¨æˆ–åŒä¸€ä¸ªæœåŠ¡çš„æä¾›æ–¹éƒ½ä¼šéƒ¨ç½²å¤šä»½ï¼Œä»¥è¾¾åˆ°å¯¹ç­‰æœåŠ¡çš„ç›®æ ‡ã€‚SOFA RPCæä¾›è½¯ä»¶è´Ÿè½½çš„èƒ½åŠ›ï¼Œå®ƒæ˜¯å¯¹ç­‰æœåŠ¡è°ƒç”¨çš„è°ƒåº¦å™¨ï¼Œå®ƒä¼šå¸®åŠ©æœåŠ¡çš„æ¶ˆè´¹æ–¹åœ¨è¿™äº›å¯¹ç­‰çš„æœåŠ¡æä¾›æ–¹ä¸­åˆç†åœ°é€‰æ‹©ä¸€ä¸ªæ¥æ‰§è¡Œç›¸å…³çš„ä¸šåŠ¡é€»è¾‘ã€‚ä¸ºäº†ä¿è¯åº”ç”¨çš„é«˜å®¹é”™æ€§ï¼Œéœ€è¦æœåŠ¡æ¶ˆè´¹æ–¹èƒ½å¤Ÿæ„ŸçŸ¥æœåŠ¡æä¾›æ–¹çš„å¼‚å¸¸ï¼Œå¹¶åšå‡ºç›¸åº”çš„å¤„ç†ï¼Œä»¥å‡å°‘åº”ç”¨å‡ºé”™åå¯¼è‡´çš„æœåŠ¡è°ƒç”¨æŠ–åŠ¨ã€‚åœ¨SOFA RPCä¸­ï¼Œä¸€åˆ‡æœåŠ¡è°ƒç”¨çš„å®¹é”™æœºåˆ¶å‡ç”±è½¯è´Ÿè½½å’Œé…ç½®ä¸­å¿ƒæ§åˆ¶ï¼Œè¿™æ ·å¯ä»¥åœ¨åº”ç”¨ç³»ç»Ÿæ— æ„ŸçŸ¥çš„æƒ…å†µä¸‹ï¼Œå¸®åŠ©æœåŠ¡æ¶ˆè´¹æ–¹æ­£ç¡®é€‰æ‹©å¥åº·çš„æœåŠ¡æä¾›æ–¹ï¼Œä¿éšœå…¨ç«™çš„ç¨³å®šæ€§ã€‚

å®ç°åŸç†

 SOFA RPCè¿œç¨‹è°ƒç”¨æ˜¯é€šè¿‡æœåŠ¡æ¨¡å‹æ¥å®šä¹‰æœåŠ¡è°ƒç”¨åŒæ–¹çš„ï¼ŒæœåŠ¡åˆ†ä¸ºæœåŠ¡æ¶ˆè´¹æ–¹å’ŒæœåŠ¡æä¾›æ–¹ï¼Œå¯¹åº” RPC çš„è°ƒç”¨ç«¯å’Œè¢«è°ƒç”¨ç«¯ï¼Œå¯ä»¥ç†è§£ä¸ºè°ƒç”¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ã€‚æœåŠ¡æä¾›æ–¹ç§°ä¹‹ä¸ºæœåŠ¡(service)ï¼ŒæœåŠ¡æ¶ˆè´¹æ–¹ç§°ä¹‹ä¸ºå¼•ç”¨(reference)ã€‚

 SOFA RPCæœåŠ¡å‘å¸ƒã€å¼•ç”¨ä»¥åŠè°ƒç”¨çš„æµç¨‹å¦‚å›¾æ‰€ç¤ºï¼š

 (1)å½“SOFA RPCçš„åº”ç”¨å¯åŠ¨çš„æ—¶å€™ï¼Œå¦‚æœå‘ç°å½“å‰åº”ç”¨éœ€è¦å‘å¸ƒRPC æœåŠ¡çš„è¯ï¼Œé‚£ä¹ˆSOFA RPCä¼šå°†è¿™äº›æœåŠ¡æ³¨å†Œåˆ°é…ç½®ä¸­å¿ƒä¸Šï¼Œå°±æ˜¯å›¾ä¸­è“çº¿æ‰€ç¤ºçš„è¿‡ç¨‹ï¼›

 (2)å½“å¼•ç”¨è¿™ä¸ªæœåŠ¡çš„SOFAåº”ç”¨å¯åŠ¨æ—¶ï¼Œä¼šä»é…ç½®ä¸­å¿ƒè®¢é˜…å¯¹åº”æœåŠ¡çš„åœ°å€ï¼›

 (3)å½“é…ç½®ä¸­å¿ƒæ”¶åˆ°è®¢é˜…è¯·æ±‚åï¼Œä¼šå°†å‘å¸ƒæ–¹çš„åœ°å€åˆ—è¡¨æ¨é€ç»™è®¢é˜…æ–¹ï¼Œå°±æ˜¯å›¾ä¸­ç»¿çº¿æ‰€ç¤ºçš„è¿‡ç¨‹ï¼›

 (4)å½“å¼•ç”¨æœåŠ¡çš„ä¸€æ–¹æ‹¿åˆ°åœ°å€ä»¥åï¼Œå°±å¯ä»¥å‘èµ·ç›´è¿è°ƒç”¨æœåŠ¡ï¼Œå°±æ˜¯å›¾ä¸­è“è‰²è™šçº¿çš„éƒ¨åˆ†ã€‚



![img](https:////upload-images.jianshu.io/upload_images/6739367-d92df6996157f1ec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/601/format/jpeg)

å®ç°åŸç†



![img](https:////upload-images.jianshu.io/upload_images/6739367-638101ab4214d342.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/810/format/jpeg)

å®¢æˆ·ç«¯è°ƒç”¨æµç¨‹



![img](https:////upload-images.jianshu.io/upload_images/6739367-0481d7d67c897130.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/715/format/jpeg)

æœåŠ¡ç«¯å¤„ç†æµç¨‹



![img](https:////upload-images.jianshu.io/upload_images/6739367-cff7d02dde108eac.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/588/format/jpeg)

æ‰©å±•ç‚¹åŠ è½½

æ­å»ºç¯å¢ƒ

 SOFARPCåŒ…æ‹¬SOFARPCæ–¹å¼å’ŒSOFABootæ–¹å¼ç¼–ç¨‹ç•Œé¢ã€‚

 SOFARPCæ–¹å¼å‚è€ƒç¤ºä¾‹ï¼š

https://github.com/alipay/sofa-rpc/tree/master/example

 SOFABootæ–¹å¼å‚è€ƒç¤ºä¾‹ï¼š

https://github.com/alipay/sofa-boot/tree/master/sofaboot-samples/sofaboot-sample-with-rpc

https://github.com/alipay/sofa-rpc-boot-projects

SOFARPCæ–¹å¼

 (1)åˆ›å»ºå·¥ç¨‹

 æ–°å»ºMavenå·¥ç¨‹sofa-rpc-demoï¼Œé€šè¿‡pom.xmlæ–‡ä»¶å¼•å…¥SOFARPCçš„ä¾èµ–ï¼š



```XML
<dependency>
    <groupId>com.alipay.sofa</groupId>
    <artifactId>sofa-rpc-all</artifactId>
    <version>5.3.1</version>
</dependency>
```

(2)ç¼–å†™æœåŠ¡æä¾›ç«¯
 ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæœåŠ¡ç«¯æ¥å£

```Java
package org.alipay.sofa.rpc;

public interface HelloService {

    /**
     * Just say hello
     *
     * @param name Name
     * @return response
     */
    public String sayHello(String name);
}
```

ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæœåŠ¡ç«¯æ¥å£å®ç°

```Java
package org.alipay.sofa.rpc;

public class HelloServiceImpl implements HelloService {

    @Override
    public String sayHello(String name) {
        System.out.println("Server receive: " + name);
        return "hello " + name + " ï¼";
    }
}
```

ç¬¬ä¸‰æ­¥ï¼šç¼–å†™æœåŠ¡ç«¯ä»£ç 

```Java
package org.alipay.sofa.rpc;

import com.alipay.sofa.rpc.config.ProviderConfig;
import com.alipay.sofa.rpc.config.ServerConfig;

public class RpcServer {

    public static void main(String[] args) {
        ServerConfig serverConfig = new ServerConfig()
                .setProtocol("bolt") // è®¾ç½®ä¸€ä¸ªåè®®ï¼Œé»˜è®¤bolt
                .setPort(12200) // è®¾ç½®ä¸€ä¸ªç«¯å£ï¼Œé»˜è®¤12200
                .setDaemon(false); // éå®ˆæŠ¤çº¿ç¨‹

        ProviderConfig<HelloService> providerConfig = new ProviderConfig<HelloService>()
                .setInterfaceId(HelloService.class.getName()) // æŒ‡å®šæ¥å£
                .setRef(new HelloServiceImpl()) // æŒ‡å®šå®ç°
                .setServer(serverConfig); // æŒ‡å®šæœåŠ¡ç«¯

        providerConfig.export(); // å‘å¸ƒæœåŠ¡
    }
}
```

(3)ç¼–å†™æœåŠ¡è°ƒç”¨ç«¯
 ç¬¬ä¸€æ­¥ï¼šè·å–æœåŠ¡ç«¯æ¥å£
 æœåŠ¡ç«¯é€šè¿‡jarçš„å½¢å¼å°†æ¥å£ç±»æä¾›ç»™å®¢æˆ·ç«¯ï¼Œé€šè¿‡pom.xmlæ–‡ä»¶å¼•å…¥æœåŠ¡æä¾›ç«¯ä¾èµ–ï¼š

```XML
<dependency>
    <groupId>org.alipay.sofa</groupId>
    <artifactId>provider</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <scope>compile</scope>
</dependency>
```

ç¬¬äºŒæ­¥ï¼šç¼–å†™å®¢æˆ·ç«¯ä»£ç 

```Java
package org.alipay.sofa.rpc;

import com.alipay.sofa.rpc.config.ConsumerConfig;

public class RpcClient {

    public static void main(String[] args) {

        ConsumerConfig<HelloService> consumerConfig = new ConsumerConfig<HelloService>()
                .setInterfaceId(HelloService.class.getName()) // æŒ‡å®šæ¥å£
                .setProtocol("bolt") // æŒ‡å®šåè®®
                .setDirectUrl("bolt://127.0.0.1:12200") // æŒ‡å®šç›´è¿åœ°å€
                .setConnectTimeout(10 * 1000);

        HelloService helloService = consumerConfig.refer();

        while (true) {
            try {
                System.out.println(helloService.sayHello("world"));
            } catch (Exception e) {
                e.printStackTrace();
            }

            try {
                Thread.sleep(2000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }

        }
    }
}
```

(4)è¿è¡ŒæœåŠ¡
 åˆ†åˆ«å¯åŠ¨æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ï¼Œè§‚å¯Ÿè¿è¡Œæ•ˆæœã€‚é¦–å…ˆè¿è¡ŒæœåŠ¡æä¾›ç«¯ç¨‹åº RpcServerï¼ŒæœåŠ¡æä¾›ç«¯æ—¥å¿—è¾“å‡ºå¦‚ä¸‹ï¼š

```Java
2018-05-07 00:13:29,065 main  INFO [com.alipay.sofa.rpc.context.RpcRuntimeContext:info:102] - Welcome! Loading SOFA RPC Framework : 5.4.0_20180427231325, PID is:9876
2018-05-07 00:13:30,139 main  INFO [com.alipay.sofa.rpc.module.ModuleFactory:info:102] - Install Module: fault-tolerance
2018-05-07 00:13:30,779 main  INFO [com.alipay.sofa.rpc.bootstrap.DefaultProviderBootstrap:infoWithApp:122] - Export provider config : com.alipay.sofa.rpc.quickstart.HelloService: with bean id rpc-cfg-0
Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.remoting Log4j ]
2018-05-07 00:13:32,707 main  INFO [com.alipay.sofa.common.log:report:30] - Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.remoting Log4j ]
```

æ¥ç€è¿è¡ŒæœåŠ¡è°ƒç”¨ç«¯ç¨‹åºRpcClientï¼ŒæœåŠ¡è°ƒç”¨ç«¯æ—¥å¿—è¾“å‡ºå¦‚ä¸‹ï¼š

```Java
2018-05-07 00:16:03,775 main  INFO [com.alipay.sofa.rpc.context.RpcRuntimeContext:info:102] - Welcome! Loading SOFA RPC Framework : 5.4.0_20180427231325, PID is:6524
2018-05-07 00:16:03,851 main  INFO [com.alipay.sofa.rpc.module.ModuleFactory:info:102] - Install Module: fault-tolerance
2018-05-07 00:16:04,151 main  INFO [com.alipay.sofa.rpc.bootstrap.DefaultConsumerBootstrap:infoWithApp:122] - Refer consumer config : bolt://com.alipay.sofa.rpc.quickstart.HelloService: with bean id rpc-cfg-0
2018-05-07 00:16:05,343 main  INFO [com.alipay.sofa.rpc.client.AllConnectConnectionHolder:infoWithApp:122] - Add provider of com.alipay.sofa.rpc.quickstart.HelloService, size is : 1
Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.remoting Log4j ]
2018-05-07 00:16:06,060 SOFA-CLI-CONN-com.alipay.sofa.rpc.quickstart.HelloService-3-T1  INFO [com.alipay.sofa.common.log:report:30] - Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.remoting Log4j ]
2018-05-07 00:16:08,297 SOFA-CLI-CONN-com.alipay.sofa.rpc.quickstart.HelloService-3-T1  INFO [com.alipay.sofa.rpc.client.AllConnectConnectionHolder:infoWithApp:122] - Connect to com.alipay.sofa.rpc.quickstart.HelloService provider:bolt://127.0.0.1:12200 success ! The connection is 127.0.0.1:12200 <-> 127.0.0.1:50836
hello world ï¼
hello world ï¼
```

æœ€åæ£€æŸ¥æœåŠ¡æä¾›ç«¯æ¥æ”¶æ¶ˆæ¯æƒ…å†µï¼ŒæœåŠ¡æä¾›ç«¯æ—¥å¿—è¾“å‡ºå¦‚ä¸‹ï¼š

```Java
2018-05-07 00:13:29,065 main  INFO [com.alipay.sofa.rpc.context.RpcRuntimeContext:info:102] - Welcome! Loading SOFA RPC Framework : 5.4.0_20180427231325, PID is:9876
2018-05-07 00:13:30,139 main  INFO [com.alipay.sofa.rpc.module.ModuleFactory:info:102] - Install Module: fault-tolerance
2018-05-07 00:13:30,779 main  INFO [com.alipay.sofa.rpc.bootstrap.DefaultProviderBootstrap:infoWithApp:122] - Export provider config : com.alipay.sofa.rpc.quickstart.HelloService: with bean id rpc-cfg-0
Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.remoting Log4j ]
2018-05-07 00:13:32,707 main  INFO [com.alipay.sofa.common.log:report:30] - Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.remoting Log4j ]
Server receive: world
Server receive: world
```

**SOFABootæ–¹å¼**

 SOFABootæ˜¯èš‚èšé‡‘æœå¼€æºçš„åŸºäº Spring Boot çš„ç ”å‘æ¡†æ¶ï¼Œå®ƒåœ¨Spring Bootçš„åŸºç¡€ä¸Šï¼Œæä¾›è¯¸å¦‚ Readiness Checkï¼Œç±»éš”ç¦»ï¼Œæ—¥å¿—ç©ºé—´éš”ç¦»ç­‰ç­‰èƒ½åŠ›ã€‚åœ¨å¢å¼ºSpring Bootçš„åŒæ—¶ï¼ŒSOFABootæä¾›è®©ç”¨æˆ·å¯ä»¥åœ¨Spring Bootä¸­éå¸¸æ–¹ä¾¿åœ°ä½¿ç”¨SOFAä¸­é—´ä»¶çš„èƒ½åŠ›ã€‚
 (1)åˆ›å»ºå·¥ç¨‹
 å·¥ç¨‹æ„å»ºï¼šSOFABootæ„å»ºåœ¨Spring Bootä¹‹ä¸Šï¼Œä½¿ç”¨Spring Boot çš„å·¥ç¨‹ç”Ÿæˆå·¥å…·æ¥ç”Ÿæˆæ ‡å‡†çš„Spring Boot å·¥ç¨‹ï¼Œæ–°å»ºå·¥ç¨‹sofa-rpc-boot-demoã€‚



![æ„å»ºé¡¹ç›®](https:////upload-images.jianshu.io/upload_images/6739367-e3fda3832f0b95a3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/jpeg)



å¼•å…¥SOFABootä¾èµ–ï¼šSOFABootæä¾›å¦‚å¥åº·æ£€æŸ¥ï¼Œä¸Šä¸‹æ–‡éš”ç¦»ç­‰åŸºç¡€èƒ½åŠ›ï¼ŒåŒæ—¶æä¾›å¤šç§ä¸­é—´ä»¶è¿›è¡Œé€‰æ‹©ä½¿ç”¨ã€‚SOFABootå¯¹æä¾›è¿™äº›èƒ½åŠ›çš„ä¾èµ–åˆ©ç”¨å¦‚ä¸‹pomè¿›è¡Œç®¡æ§ï¼Œå°†å·¥ç¨‹çš„parentè®¾ä¸ºè¯¥pomï¼š



```XML
<parent>
    <groupId>com.alipay.sofa</groupId>
    <artifactId>sofaboot-dependencies</artifactId>
    <version>2.3.2</version>
</parent>
```

å¼•å…¥SOFARPC Starterï¼šSOFARPC Starteræ˜¯SOFARPCåŸºäºSOFABootå®ç°çš„æ¡†æ¶ï¼Œèƒ½å¤Ÿå°†SOFARPCçš„èƒ½åŠ›ä»¥ç»Ÿä¸€çš„ç¼–ç¨‹ç•Œé¢å’Œç®€å•çš„æ“ä½œå½¢å¼æä¾›ç»™ä½¿ç”¨è€…ã€‚è¯¥ä¾èµ–å·²è¢« SOFABootç®¡æ§ï¼Œpom.xmlæ–‡ä»¶éœ€è¦å¼•å…¥å¦‚ä¸‹ä¾èµ–ï¼š

```XML
<dependency>
     <groupId>com.alipay.sofa</groupId>
     <artifactId>rpc-sofa-boot-starter</artifactId>
 </dependency>
```

é…ç½®åº”ç”¨ï¼šapplication.propertiesæ˜¯SOFABootå·¥ç¨‹ä¸­çš„é…ç½®æ–‡ä»¶ã€‚é…ç½® application.properties éœ€è¦é…ç½®ä¸€ä¸ªå¿…ä¸å¯å°‘çš„é…ç½®é¡¹ï¼Œå³åº”ç”¨åï¼Œå¹¶ä¸”éœ€è¦å°†application.propertiesä¸­çš„com.alipay.sofa.rpc.registry.address é…ç½®æ³¨é‡Šæ‰.æŒ‡å®šèµ°æœ¬åœ°æ–‡ä»¶æ³¨å†Œä¸­å¿ƒçš„æ–¹å¼ï¼š

```Java
spring.application.name=sofa-rpc-boot-demo
#com.alipay.sofa.rpc.registry.address=zookeeper://127.0.0.1:2181
```

å£°æ˜SOFABootçš„xsdæ–‡ä»¶ï¼šå£°æ˜ SOFABootçš„xsdæ–‡ä»¶åœ¨è¦ä½¿ç”¨çš„XMLé…ç½®æ–‡ä»¶ä¸­å°†å¤´éƒ¨ xsd æ–‡ä»¶çš„å£°æ˜å¦‚ä¸‹è®¾ç½®ï¼Œè¿™æ ·å°±èƒ½å¤Ÿä½¿ç”¨ SOFABoot å®šä¹‰çš„ XML å…ƒç´ è¿›è¡Œå¼€å‘ï¼š

```XML
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:sofa="http://sofastack.io/schema/sofaboot"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd            http://sofastack.io/schema/sofaboot   http://sofastack.io/schema/sofaboot.xsd"
       default-autowire="byName">
```

(2)ç¼–å†™æœåŠ¡æä¾›ç«¯
 ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæœåŠ¡ç«¯æ¥å£

```Java
package org.alipay.sofa.rpc;

public interface HelloSyncService {

   String saySync(String string);
}
```

ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæœåŠ¡ç«¯æ¥å£å®ç°

```Java
package org.alipay.sofa.rpc;

public class HelloSyncServiceImpl implements HelloSyncService {

    @Override
    public String saySync(String string) {
        return string;
    }
}
```

ç¬¬ä¸‰æ­¥ï¼šæœåŠ¡ç«¯å‘å¸ƒæœåŠ¡
 æ–°å»ºsrc/main/resource/sofa-rpc-server.xmlæ–‡ä»¶ï¼Œåœ¨xmlæ–‡ä»¶ä¸­ç¼–å†™å¦‚ä¸‹é…ç½®ã€‚Springä¸Šä¸‹æ–‡åœ¨åˆ·æ–°æ—¶ï¼ŒSOFABootå°±å°†è¯¥æœåŠ¡å®ç°æ³¨å†Œåˆ°äº†æœåŠ¡å™¨ä¸Šï¼Œä»¥boltåè®®ä¸å®¢æˆ·ç«¯è¿›è¡Œé€šä¿¡åœ°å€ï¼Œå¹¶å°†åœ°å€ç­‰å…ƒæ•°æ®å‘å¸ƒåˆ°äº†æ³¨å†Œä¸­å¿ƒï¼Œé»˜è®¤ä½¿ç”¨çš„æœ¬åœ°æ–‡ä»¶ä½œä¸ºæ³¨å†Œä¸­å¿ƒï¼š

```XML
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:sofa="http://sofastack.io/schema/sofaboot"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
            http://sofastack.io/schema/sofaboot   http://sofastack.io/schema/sofaboot.xsd">

    <!-- invoke sync-->
    <bean id="helloSyncServiceImpl" class="com.alipay.sofa.rpc.HelloSyncServiceImpl"/>
    <sofa:service ref="helloSyncServiceImpl" interface="com.alipay.sofa.rpc.HelloSyncService">
        <sofa:binding.bolt/>
    </sofa:service>
</beans>
```

(3)ç¼–å†™æœåŠ¡è°ƒç”¨ç«¯
 ç¬¬ä¸€æ­¥ï¼šè·å–æœåŠ¡ç«¯æ¥å£
 æœåŠ¡ç«¯é€šè¿‡jarçš„å½¢å¼å°†æ¥å£ç±»æä¾›ç»™å®¢æˆ·ç«¯ï¼Œé€šè¿‡pom.xmlæ–‡ä»¶å¼•å…¥æœåŠ¡æä¾›ç«¯ä¾èµ–ï¼š

```XML
<dependency>
    <groupId>org.alipay.sofa</groupId>
    <artifactId>provider</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <scope>compile</scope>
</dependency>
```

ç¬¬äºŒæ­¥ï¼šå®¢æˆ·ç«¯å¼•ç”¨æœåŠ¡
 æ–°å»ºsrc/main/resource/sofa-rpc-client.xmlæ–‡ä»¶ï¼Œåœ¨xmlæ–‡ä»¶ä¸­ç¼–å†™å¦‚ä¸‹é…ç½®ã€‚Springä¸Šä¸‹æ–‡åˆ·æ–°æ—¶ï¼ŒSOFABootä¼šç”Ÿæˆä¸€ä¸ªRPCçš„ä»£ç† beanï¼Œå³helloSyncServiceReferenceã€‚è¿™æ ·å°±å¯ä»¥ç›´æ¥åœ¨ä»£ç ä¸­ä½¿ç”¨è¯¥ bean è¿›è¡Œè¿œç¨‹è°ƒç”¨ï¼š

```XML
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:sofa="http://sofastack.io/schema/sofaboot"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
            http://sofastack.io/schema/sofaboot   http://sofastack.io/schema/sofaboot.xsd">

    <!-- invoke sync-->
    <sofa:reference id="helloSyncServiceReference" interface="com.alipay.sofa.rpc.HelloSyncService">
        <sofa:binding.bolt/>
    </sofa:reference>
</beans>
```

å…¶ä¸­referenceå…ƒç´ è¡¨ç¤ºå¼•ç”¨è¯¥æœåŠ¡ï¼Œbindingå…ƒç´ å£°æ˜è¯¥æœåŠ¡å¼•ç”¨çš„è°ƒç”¨çš„åè®®ã€‚
 (4)è¿è¡ŒæœåŠ¡
 æ”¹é€ é»˜è®¤å¯åŠ¨ç±»ï¼Œåœ¨ SpringBoot çš„å¯åŠ¨ç±»ä¸­ç¼–ç å¦‚ä¸‹ï¼Œå…¶ä¸­åˆ©ç”¨ ImportResource å°†ä¸Šè¿°çš„xmlæ–‡ä»¶åŠ è½½ã€‚
 æœåŠ¡æä¾›ç«¯å¯åŠ¨ç±»ï¼š

```Java
package org.alipay.sofa.rpc;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.ImportResource;

@ImportResource({"classpath:sofa-rpc-server.xml"})
@SpringBootApplication
public class ServerProviderApplication {

    public static void main(String[] args) {
        SpringApplication springApplication = new SpringApplication(ServerProviderApplication.class);
        ApplicationContext applicationContext = springApplication.run(args);
    }
}
```

æœåŠ¡è°ƒç”¨ç«¯å¯åŠ¨ç±»ï¼š

```XML
package org.alipay.sofa.rpc;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.ImportResource;

@ImportResource({"classpath:sofa-rpc-client.xml"})
@SpringBootApplication
public class ClientConsumerApplication {

    public static void main(String[] args) {
        SpringApplication springApplication = new SpringApplication(ClientConsumerApplication.class);
        ApplicationContext applicationContext = springApplication.run(args);

        HelloSyncService helloSyncServiceReference = (HelloSyncService) applicationContext
                .getBean("helloSyncServiceReference");
        System.out.println(helloSyncServiceReference.saySync("sync"));
    }
}
```

è¿è¡ŒæœåŠ¡æä¾›ç«¯å¯åŠ¨ç±»ServerProviderApplication æŸ¥çœ‹æä¾›ç«¯è¿è¡Œæ•ˆæœï¼ŒæœåŠ¡æä¾›ç«¯è¾“å‡ºæ—¥å¿—å¦‚ä¸‹ï¼š

```Java
  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v1.4.2.RELEASE)

Sofa-Middleware-Log SLF4J : Actual logging.path is [ ./logs ]
2018-05-07 02:26:38.972  INFO 14136 --- [           main] com.alipay.sofa.common.log               : Sofa-Middleware-Log SLF4J : Actual logging.path is [ ./logs ]
Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.sofa.infra Logback ]
2018-05-07 02:26:39.004  INFO 14136 --- [           main] com.alipay.sofa.common.log               : Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.sofa.infra Logback ]
Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.sofa.healthcheck Logback ]
2018-05-07 02:26:39.367  INFO 14136 --- [           main] com.alipay.sofa.common.log               : Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.sofa.healthcheck Logback ]
2018-05-07 02:26:39.551  INFO 14136 --- [           main] c.a.s.r.s.d.ServerProvierApplication      : Starting ServerProvierApplication on LBDZ-20120729HW with PID 14136 (D:\Program\Github\sofa-rpc-boot-projects\sofa-boot-samples\target\classes started by Administrator in D:\Program\Github\sofa-rpc-boot-projects)
2018-05-07 02:26:39.552  INFO 14136 --- [           main] c.a.s.r.s.d.ServerProvierApplication      : No active profile set, falling back to default profiles: default
2018-05-07 02:26:39.846  INFO 14136 --- [           main] ationConfigEmbeddedWebApplicationContext : Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@14dd9eb7: startup date [Mon May 07 02:26:39 CST 2018]; root of context hierarchy
2018-05-07 02:26:41.873  INFO 14136 --- [           main] o.s.b.f.xml.XmlBeanDefinitionReader      : Loading XML bean definitions from class path resource [sofa-rpc-client.xml]
Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.sofa.rpc.boot Logback ]
2018-05-07 02:26:42.459  INFO 14136 --- [           main] com.alipay.sofa.common.log               : Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.sofa.rpc.boot Logback ]
2018-05-07 02:26:42.712  INFO 14136 --- [           main] o.s.b.f.xml.XmlBeanDefinitionReader      : Loading XML bean definitions from class path resource [sofa-rpc-server .xml]
Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.sofa.runtime Logback ]
2018-05-07 02:26:43.934  INFO 14136 --- [           main] com.alipay.sofa.common.log               : Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.sofa.runtime Logback ]
Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.sofa.rpc Logback ]
2018-05-07 02:26:45.805  INFO 14136 --- [           main] com.alipay.sofa.common.log               : Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.sofa.rpc Logback ]
Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.remoting Logback ]
2018-05-07 02:26:46.025  INFO 14136 --- [ectService-3-T1] com.alipay.sofa.common.log               : Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.remoting Logback ]
2018-05-07 02:26:46.970  INFO 14136 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat initialized with port(s): 8080 (http)
2018-05-07 02:26:47.026  INFO 14136 --- [           main] o.apache.catalina.core.StandardService   : Starting service Tomcat
2018-05-07 02:26:47.028  INFO 14136 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/8.5.6
2018-05-07 02:26:47.328  INFO 14136 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2018-05-07 02:26:47.328  INFO 14136 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 7482 ms
2018-05-07 02:26:47.822  INFO 14136 --- [ost-startStop-1] o.s.b.w.servlet.ServletRegistrationBean  : Mapping servlet: 'dispatcherServlet' to [/]
2018-05-07 02:26:47.829  INFO 14136 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'metricsFilter' to: [/*]
2018-05-07 02:26:47.830  INFO 14136 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'characterEncodingFilter' to: [/*]
2018-05-07 02:26:47.830  INFO 14136 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
2018-05-07 02:26:47.830  INFO 14136 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'httpPutFormContentFilter' to: [/*]
2018-05-07 02:26:47.831  INFO 14136 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'requestContextFilter' to: [/*]
2018-05-07 02:26:47.831  INFO 14136 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'webRequestLoggingFilter' to: [/*]
2018-05-07 02:26:47.831  INFO 14136 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'applicationContextIdFilter' to: [/*]
2018-05-07 02:26:48.658  INFO 14136 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@14dd9eb7: startup date [Mon May 07 02:26:39 CST 2018]; root of context hierarchy
2018-05-07 02:26:48.755  INFO 14136 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
2018-05-07 02:26:48.757  INFO 14136 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
2018-05-07 02:26:48.810  INFO 14136 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2018-05-07 02:26:48.810  INFO 14136 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2018-05-07 02:26:48.923  INFO 14136 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2018-05-07 02:26:49.506  INFO 14136 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/health || /health.json],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.HealthMvcEndpoint.invoke(java.security.Principal)
2018-05-07 02:26:49.510  INFO 14136 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/info || /info.json],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()
2018-05-07 02:26:49.511  INFO 14136 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/beans || /beans.json],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()
2018-05-07 02:26:49.513  INFO 14136 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/metrics/{name:.*}],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.MetricsMvcEndpoint.value(java.lang.String)
2018-05-07 02:26:49.513  INFO 14136 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/metrics || /metrics.json],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()
2018-05-07 02:26:49.515  INFO 14136 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/mappings || /mappings.json],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()
2018-05-07 02:26:49.517  INFO 14136 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/sofaboot/versions || /sofaboot/versions.json],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()
2018-05-07 02:26:49.518  INFO 14136 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/trace || /trace.json],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()
2018-05-07 02:26:49.524  INFO 14136 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/env/{name:.*}],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EnvironmentMvcEndpoint.value(java.lang.String)
2018-05-07 02:26:49.524  INFO 14136 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/env || /env.json],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()
2018-05-07 02:26:49.525  INFO 14136 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/logfile || /logfile.json],methods=[GET || HEAD]}" onto public void org.springframework.boot.actuate.endpoint.mvc.LogFileMvcEndpoint.invoke(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws javax.servlet.ServletException,java.io.IOException
2018-05-07 02:26:49.526  INFO 14136 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/dump || /dump.json],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()
2018-05-07 02:26:49.527  INFO 14136 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/heapdump || /heapdump.json],methods=[GET],produces=[application/octet-stream]}" onto public void org.springframework.boot.actuate.endpoint.mvc.HeapdumpMvcEndpoint.invoke(boolean,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.io.IOException,javax.servlet.ServletException
2018-05-07 02:26:49.527  INFO 14136 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/health/readiness || /health/readiness.json],produces=[application/json]}" onto public java.lang.Object com.alipay.sofa.healthcheck.service.SofaBootReadinessCheckMvcEndpoint.invoke(java.security.Principal)
2018-05-07 02:26:49.528  INFO 14136 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/autoconfig || /autoconfig.json],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()
2018-05-07 02:26:49.529  INFO 14136 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/configprops || /configprops.json],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()
2018-05-07 02:26:49.762  INFO 14136 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Registering beans for JMX exposure on startup
2018-05-07 02:26:49.786  INFO 14136 --- [           main] o.s.c.support.DefaultLifecycleProcessor  : Starting beans in phase 0
2018-05-07 02:26:50.878  INFO 14136 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat started on port(s): 8080 (http)
2018-05-07 02:26:50.891  INFO 14136 --- [           main] c.a.s.r.s.d.ServerProvierApplication      : Started ServerProvierApplication in 14.713 seconds (JVM running for 21.842)
```

è¿è¡ŒæœåŠ¡è°ƒç”¨ç«¯å¯åŠ¨ç±»ClientConsumerApplication æŸ¥çœ‹è°ƒç”¨ç«¯è¿è¡Œæ•ˆæœï¼ŒæœåŠ¡è°ƒç”¨ç«¯è¾“å‡ºæ—¥å¿—å¦‚ä¸‹ï¼š

```Java
  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v1.4.2.RELEASE)

Sofa-Middleware-Log SLF4J : Actual logging.path is [ ./logs ]
2018-05-07 02:37:04.863  INFO 12900 --- [           main] com.alipay.sofa.common.log               : Sofa-Middleware-Log SLF4J : Actual logging.path is [ ./logs ]
Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.sofa.infra Logback ]
2018-05-07 02:37:04.881  INFO 12900 --- [           main] com.alipay.sofa.common.log               : Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.sofa.infra Logback ]
Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.sofa.healthcheck Logback ]
2018-05-07 02:37:05.520  INFO 12900 --- [           main] com.alipay.sofa.common.log               : Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.sofa.healthcheck Logback ]
2018-05-07 02:37:05.583  INFO 12900 --- [           main] c.a.s.r.s.d.ClientConsumerApplication      : Starting ClientConsumerApplication on LBDZ-20120729HW with PID 12900 (D:\Program\Github\sofa-rpc-boot-projects\sofa-boot-samples\target\classes started by Administrator in D:\Program\Github\sofa-rpc-boot-projects)
2018-05-07 02:37:05.584  INFO 12900 --- [           main] c.a.s.r.s.d.ClientConsumerApplication      : No active profile set, falling back to default profiles: default
2018-05-07 02:37:05.682  INFO 12900 --- [           main] ationConfigEmbeddedWebApplicationContext : Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@5fe94a96: startup date [Mon May 07 02:37:05 CST 2018]; root of context hierarchy
2018-05-07 02:37:07.835  INFO 12900 --- [           main] o.s.b.f.xml.XmlBeanDefinitionReader      : Loading XML bean definitions from class path resource [sofa-rpc-server.xml]
Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.sofa.rpc.boot Logback ]
2018-05-07 02:37:08.234  INFO 12900 --- [           main] com.alipay.sofa.common.log               : Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.sofa.rpc.boot Logback ]
2018-05-07 02:37:08.339  INFO 12900 --- [           main] o.s.b.f.xml.XmlBeanDefinitionReader      : Loading XML bean definitions from class path resource [sofa-rpc-client.xml]
Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.sofa.runtime Logback ]
2018-05-07 02:37:09.738  INFO 12900 --- [           main] com.alipay.sofa.common.log               : Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.sofa.runtime Logback ]
Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.sofa.rpc Logback ]
2018-05-07 02:37:10.476  INFO 12900 --- [           main] com.alipay.sofa.common.log               : Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.sofa.rpc Logback ]
Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.remoting Logback ]
2018-05-07 02:37:10.746  INFO 12900 --- [ectService-3-T1] com.alipay.sofa.common.log               : Sofa-Middleware-Log SLF4J : Actual binding is of type [ com.alipay.remoting Logback ]
2018-05-07 02:37:12.152  INFO 12900 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat initialized with port(s): 8081 (http)
2018-05-07 02:37:12.176  INFO 12900 --- [           main] o.apache.catalina.core.StandardService   : Starting service Tomcat
2018-05-07 02:37:12.178  INFO 12900 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/8.5.6
2018-05-07 02:37:12.559  INFO 12900 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2018-05-07 02:37:12.559  INFO 12900 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 6877 ms
2018-05-07 02:37:13.272  INFO 12900 --- [ost-startStop-1] o.s.b.w.servlet.ServletRegistrationBean  : Mapping servlet: 'dispatcherServlet' to [/]
2018-05-07 02:37:13.284  INFO 12900 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'metricsFilter' to: [/*]
2018-05-07 02:37:13.285  INFO 12900 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'characterEncodingFilter' to: [/*]
2018-05-07 02:37:13.285  INFO 12900 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
2018-05-07 02:37:13.285  INFO 12900 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'httpPutFormContentFilter' to: [/*]
2018-05-07 02:37:13.286  INFO 12900 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'requestContextFilter' to: [/*]
2018-05-07 02:37:13.286  INFO 12900 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'webRequestLoggingFilter' to: [/*]
2018-05-07 02:37:13.286  INFO 12900 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'applicationContextIdFilter' to: [/*]
2018-05-07 02:37:14.587  INFO 12900 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@5fe94a96: startup date [Mon May 07 02:37:05 CST 2018]; root of context hierarchy
2018-05-07 02:37:14.775  INFO 12900 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
2018-05-07 02:37:14.777  INFO 12900 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
2018-05-07 02:37:14.946  INFO 12900 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2018-05-07 02:37:14.946  INFO 12900 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2018-05-07 02:37:15.038  INFO 12900 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2018-05-07 02:37:15.883  INFO 12900 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/sofaboot/versions || /sofaboot/versions.json],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()
2018-05-07 02:37:15.889  INFO 12900 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/beans || /beans.json],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()
2018-05-07 02:37:15.894  INFO 12900 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/metrics/{name:.*}],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.MetricsMvcEndpoint.value(java.lang.String)
2018-05-07 02:37:15.894  INFO 12900 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/metrics || /metrics.json],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()
2018-05-07 02:37:15.896  INFO 12900 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/heapdump || /heapdump.json],methods=[GET],produces=[application/octet-stream]}" onto public void org.springframework.boot.actuate.endpoint.mvc.HeapdumpMvcEndpoint.invoke(boolean,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.io.IOException,javax.servlet.ServletException
2018-05-07 02:37:15.899  INFO 12900 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/health/readiness || /health/readiness.json],produces=[application/json]}" onto public java.lang.Object com.alipay.sofa.healthcheck.service.SofaBootReadinessCheckMvcEndpoint.invoke(java.security.Principal)
2018-05-07 02:37:15.901  INFO 12900 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/autoconfig || /autoconfig.json],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()
2018-05-07 02:37:15.905  INFO 12900 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/configprops || /configprops.json],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()
2018-05-07 02:37:15.907  INFO 12900 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/mappings || /mappings.json],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()
2018-05-07 02:37:15.914  INFO 12900 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/dump || /dump.json],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()
2018-05-07 02:37:15.922  INFO 12900 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/logfile || /logfile.json],methods=[GET || HEAD]}" onto public void org.springframework.boot.actuate.endpoint.mvc.LogFileMvcEndpoint.invoke(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws javax.servlet.ServletException,java.io.IOException
2018-05-07 02:37:15.929  INFO 12900 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/env/{name:.*}],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EnvironmentMvcEndpoint.value(java.lang.String)
2018-05-07 02:37:15.929  INFO 12900 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/env || /env.json],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()
2018-05-07 02:37:15.931  INFO 12900 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/info || /info.json],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()
2018-05-07 02:37:15.932  INFO 12900 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/health || /health.json],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.HealthMvcEndpoint.invoke(java.security.Principal)
2018-05-07 02:37:15.934  INFO 12900 --- [           main] o.s.b.a.e.mvc.EndpointHandlerMapping     : Mapped "{[/trace || /trace.json],methods=[GET],produces=[application/json]}" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()
2018-05-07 02:37:16.272  INFO 12900 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Registering beans for JMX exposure on startup
2018-05-07 02:37:16.296  INFO 12900 --- [           main] o.s.c.support.DefaultLifecycleProcessor  : Starting beans in phase 0
2018-05-07 02:37:17.522  INFO 12900 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat started on port(s): 8081 (http)
2018-05-07 02:37:17.536  INFO 12900 --- [           main] c.a.s.r.s.d.ClientConsumerApplication      : Started ClientConsumerApplication in 19.234 seconds (JVM running for 21.96)
sync
```

ä»¥ä¸ŠæˆåŠŸè¿è¡Œå®Œæˆä¸€æ¬¡æœåŠ¡å‘å¸ƒå’ŒæœåŠ¡åº”ç”¨ã€‚

 **ä½¿ç”¨æ€»ç»“**

 SOFARPCæ˜¯ä¸€æ¬¾åŸºäº Java å®ç°è½»é‡çº§çš„RPCæœåŠ¡æ¡†æ¶ï¼ŒåŸºäºNettyç½‘ç»œé€šä¿¡æ¡†æ¶æä¾›åº”ç”¨ä¹‹é—´çš„ç‚¹å¯¹ç‚¹æœåŠ¡è°ƒç”¨åŠŸèƒ½ï¼ŒSOFARPC ä¸ºåº”ç”¨ä¹‹é—´æä¾›è¿œç¨‹æœåŠ¡è°ƒç”¨èƒ½åŠ›ï¼Œå…·å¤‡é«˜å¯ä¼¸ç¼©æ€§ã€é«˜å®¹é”™æ€§ç­‰ç‰¹æ€§ï¼Œæä¾›è´Ÿè½½å‡è¡¡ï¼Œæµé‡è½¬å‘ï¼Œé“¾è·¯è¿½è¸ªï¼Œé“¾è·¯æ•°æ®é€ä¼ ï¼Œæ•…éšœå‰”é™¤ç­‰åŠŸèƒ½ï¼Œæ”¯æŒ boltï¼Œrestï¼Œdubbo åè®®è¿›è¡Œé€šä¿¡ï¼Œå…¶ä¸­ bolt æ˜¯èš‚èšé‡‘èæœåŠ¡é›†å›¢å¼€æ”¾çš„åŸºäº Netty å¼€å‘çš„ç½‘ç»œé€šä¿¡æ¡†æ¶ã€‚æ­å»ºæºç è°ƒè¯•ç¯å¢ƒæŒ‡å®šé»˜è®¤èµ°æœ¬åœ°æ–‡ä»¶æ³¨å†Œä¸­å¿ƒï¼Œå…³äºæ­å»ºé›†æˆZookeeperæ³¨å†Œä¸­å¿ƒç¯å¢ƒå‚è€ƒ<https://www.jianshu.com/p/97323e1057e3>ã€‚æ¥ä¸‹æ¥é‡ç‚¹æºç è§£æSOFARPCå„ä¸ªæ¨¡å—æºç ã€‚