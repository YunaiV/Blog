title: ã€æ­»ç£• Java å¹¶å‘ã€‘â€”â€“ J.U.C ä¹‹çº¿ç¨‹æ± ï¼šçº¿ç¨‹æ± çš„åŸºç¡€æ¶æ„
date: 2018-06-17
tag: 
categories: JUC
permalink: JUC/sike/ThreadPool-core
author: å°æ˜å“¥
from_url: http://cmsblogs.com/?p=2444
wechat_url: 

-------

æ‘˜è¦: åŸåˆ›å‡ºå¤„ http://cmsblogs.com/?p=2444 ã€Œå°æ˜å“¥ã€æ¬¢è¿è½¬è½½ï¼Œä¿ç•™æ‘˜è¦ï¼Œè°¢è°¢ï¼

ä½œä¸ºã€Œå°æ˜å“¥ã€çš„å¿ å®è¯»è€…ï¼Œã€Œè€è‰¿è‰¿ã€ç•¥ä½œä¿®æ”¹ï¼Œè®°å½•åœ¨ç†è§£è¿‡ç¨‹ä¸­ï¼Œå‚è€ƒçš„èµ„æ–™ã€‚

- [1. ç®€ä»‹](http://www.iocoder.cn/JUC/sike/ThreadPool-core/)
- [2. Executor ä½“ç³»](http://www.iocoder.cn/JUC/sike/ThreadPool-core/)
  - [2.1 Executor](http://www.iocoder.cn/JUC/sike/ThreadPool-core/)
  - [2.2 ExcutorService](http://www.iocoder.cn/JUC/sike/ThreadPool-core/)
  - [2.3 AbstractExecutorService](http://www.iocoder.cn/JUC/sike/ThreadPool-core/)
  - [2.4 ScheduledExecutorService](http://www.iocoder.cn/JUC/sike/ThreadPool-core/)
  - [2.5 ThreadPoolExecutor](http://www.iocoder.cn/JUC/sike/ThreadPool-core/)
  - [2.6 ScheduledThreadPoolExecutor](http://www.iocoder.cn/JUC/sike/ThreadPool-core/)
  - [2.7 Executors](http://www.iocoder.cn/JUC/sike/ThreadPool-core/)
- [3. Future ä½“ç³»](http://www.iocoder.cn/JUC/sike/ThreadPool-core/)
  - [3.1 Future](http://www.iocoder.cn/JUC/sike/ThreadPool-core/)
  - [3.2 RunnableFuture](http://www.iocoder.cn/JUC/sike/ThreadPool-core/)
  - [3.3 FutureTask](http://www.iocoder.cn/JUC/sike/ThreadPool-core/)
- [666. å½©è›‹](http://www.iocoder.cn/JUC/sike/ThreadPool-core/)

-------

![](http://www.iocoder.cn/images/common/wechat_mp_2017_07_31.jpg)

> ğŸ™‚ğŸ™‚ğŸ™‚å…³æ³¨**å¾®ä¿¡å…¬ä¼—å·ï¼šã€èŠ‹é“æºç ã€‘**æœ‰ç¦åˆ©ï¼š
> 1. RocketMQ / MyCAT / Sharding-JDBC **æ‰€æœ‰**æºç åˆ†ææ–‡ç« åˆ—è¡¨
> 2. RocketMQ / MyCAT / Sharding-JDBC **ä¸­æ–‡æ³¨é‡Šæºç  GitHub åœ°å€**
> 3. æ‚¨å¯¹äºæºç çš„ç–‘é—®æ¯æ¡ç•™è¨€**éƒ½**å°†å¾—åˆ°**è®¤çœŸ**å›å¤ã€‚**ç”šè‡³ä¸çŸ¥é“å¦‚ä½•è¯»æºç ä¹Ÿå¯ä»¥è¯·æ•™å™¢**ã€‚
> 4. **æ–°çš„**æºç è§£ææ–‡ç« **å®æ—¶**æ”¶åˆ°é€šçŸ¥ã€‚**æ¯å‘¨æ›´æ–°ä¸€ç¯‡å·¦å³**ã€‚
> 5. **è®¤çœŸçš„**æºç äº¤æµå¾®ä¿¡ç¾¤ã€‚

-------

# 1. ç®€ä»‹

ç»å†äº† Java å†…å­˜æ¨¡å‹ã€J.U.C åŸºç¡€ä¹‹ AQS ã€CAS ã€Lock ã€å¹¶å‘å·¥å…·ç±»ã€å¹¶å‘å®¹å™¨ã€é˜»å¡é˜Ÿåˆ—ã€Atomic ç±»åï¼Œæˆ‘ä»¬å¼€å§‹ J.U.C çš„æœ€åä¸€éƒ¨åˆ†ï¼š**çº¿ç¨‹æ± **ã€‚åœ¨è¿™ä¸ªéƒ¨åˆ†ä½ å°†äº†è§£åˆ°ä¸‹é¢å››ä¸ªéƒ¨åˆ†ï¼š

1. çº¿ç¨‹æ± çš„åŸºç¡€æ¶æ„
2. çº¿ç¨‹æ± çš„åŸç†åˆ†æ
3. çº¿ç¨‹æ± æ ¸å¿ƒç±»çš„æºç åˆ†æ
4. çº¿ç¨‹æ± è°ƒä¼˜

# 2. Executor ä½“ç³»

æˆ‘ä»¬å…ˆçœ‹çº¿ç¨‹æ± çš„åŸºç¡€æ¶æ„å›¾ï¼š

![çº¿ç¨‹æ± ](http://upload-images.jianshu.io/upload_images/2251324-f27c0413b40951c3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## 2.1 Executor

`java.util.concurrent.Executor` ï¼Œä»»åŠ¡çš„æ‰§è¡Œè€…æ¥å£ï¼Œçº¿ç¨‹æ± æ¡†æ¶ä¸­å‡ ä¹æ‰€æœ‰ç±»éƒ½ç›´æ¥æˆ–è€…é—´æ¥å®ç° Executor æ¥å£ï¼Œå®ƒæ˜¯çº¿ç¨‹æ± æ¡†æ¶çš„åŸºç¡€ã€‚

Executor æä¾›äº†ä¸€ç§å°†â€œä»»åŠ¡æäº¤â€ä¸â€œä»»åŠ¡æ‰§è¡Œâ€åˆ†ç¦»å¼€æ¥çš„æœºåˆ¶ï¼Œå®ƒä»…æä¾›äº†ä¸€ä¸ª `#execute(Runnable command)` æ–¹æ³•ï¼Œç”¨æ¥æ‰§è¡Œå·²ç»æäº¤çš„ Runnable ä»»åŠ¡ã€‚ä»£ç å¦‚ä¸‹ï¼š

```Java
public interface Executor {

    void execute(Runnable command);
    
}
```

## 2.2 ExcutorService

`java.util.concurrent.ExcutorService` ï¼Œç»§æ‰¿ Executor æ¥å£ï¼Œå®ƒæ˜¯â€œæ‰§è¡Œè€…æœåŠ¡â€æ¥å£ï¼Œå®ƒæ˜¯ä¸º"æ‰§è¡Œè€…æ¥å£ Executor "æœåŠ¡è€Œå­˜åœ¨çš„ã€‚å‡†ç¡®çš„åœ°è¯´ï¼ŒExecutorService æä¾›äº†"å°†ä»»åŠ¡æäº¤ç»™æ‰§è¡Œè€…çš„æ¥å£( submit æ–¹æ³•)"ï¼Œ"è®©æ‰§è¡Œè€…æ‰§è¡Œä»»åŠ¡( invokeAll , invokeAny æ–¹æ³•)"çš„æ¥å£ç­‰ç­‰ã€‚ä»£ç å¦‚ä¸‹ï¼š

```Java
public interface ExecutorService extends Executor {

    /**
     * å¯åŠ¨ä¸€æ¬¡é¡ºåºå…³é—­ï¼Œæ‰§è¡Œä»¥å‰æäº¤çš„ä»»åŠ¡ï¼Œä½†ä¸æ¥å—æ–°ä»»åŠ¡
     */
    void shutdown();

    /**
     * è¯•å›¾åœæ­¢æ‰€æœ‰æ­£åœ¨æ‰§è¡Œçš„æ´»åŠ¨ä»»åŠ¡ï¼Œæš‚åœå¤„ç†æ­£åœ¨ç­‰å¾…çš„ä»»åŠ¡ï¼Œå¹¶è¿”å›ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡åˆ—è¡¨
     */
    List<Runnable> shutdownNow();

    /**
     * å¦‚æœæ­¤æ‰§è¡Œç¨‹åºå·²å…³é—­ï¼Œåˆ™è¿”å› trueã€‚
     */
    boolean isShutdown();

    /**
     * å¦‚æœå…³é—­åæ‰€æœ‰ä»»åŠ¡éƒ½å·²å®Œæˆï¼Œåˆ™è¿”å› true
     */
    boolean isTerminated();

    /**
     * è¯·æ±‚å…³é—­ã€å‘ç”Ÿè¶…æ—¶æˆ–è€…å½“å‰çº¿ç¨‹ä¸­æ–­ï¼Œæ— è®ºå“ªä¸€ä¸ªé¦–å…ˆå‘ç”Ÿä¹‹åï¼Œéƒ½å°†å¯¼è‡´é˜»å¡ï¼Œç›´åˆ°æ‰€æœ‰ä»»åŠ¡å®Œæˆæ‰§è¡Œ
     */
    boolean awaitTermination(long timeout, TimeUnit unit)
        throws InterruptedException;

    // ========== æäº¤ä»»åŠ¡ ==========

    /**
     * æäº¤ä¸€ä¸ªè¿”å›å€¼çš„ä»»åŠ¡ç”¨äºæ‰§è¡Œï¼Œè¿”å›ä¸€ä¸ªè¡¨ç¤ºä»»åŠ¡çš„æœªå†³ç»“æœçš„ Future
     */
    <T> Future<T> submit(Callable<T> task);

    /**
     * æäº¤ä¸€ä¸ª Runnable ä»»åŠ¡ç”¨äºæ‰§è¡Œï¼Œå¹¶è¿”å›ä¸€ä¸ªè¡¨ç¤ºè¯¥ä»»åŠ¡çš„ Future
     */
    <T> Future<T> submit(Runnable task, T result);

    /**
     * æäº¤ä¸€ä¸ª Runnable ä»»åŠ¡ç”¨äºæ‰§è¡Œï¼Œå¹¶è¿”å›ä¸€ä¸ªè¡¨ç¤ºè¯¥ä»»åŠ¡çš„ Future
     */
    Future<?> submit(Runnable task);

    /**
     * æ‰§è¡Œç»™å®šçš„ä»»åŠ¡ï¼Œå½“æ‰€æœ‰ä»»åŠ¡å®Œæˆæ—¶ï¼Œè¿”å›ä¿æŒä»»åŠ¡çŠ¶æ€å’Œç»“æœçš„ Future åˆ—è¡¨
     */
    <T> List<Future<T>> invokeAll(Collection<? extends Callable<T>> tasks)
        throws InterruptedException;

    /**
     * æ‰§è¡Œç»™å®šçš„ä»»åŠ¡ï¼Œå½“æ‰€æœ‰ä»»åŠ¡å®Œæˆæˆ–è¶…æ—¶æœŸæ»¡æ—¶ï¼ˆæ— è®ºå“ªä¸ªé¦–å…ˆå‘ç”Ÿï¼‰ï¼Œè¿”å›ä¿æŒä»»åŠ¡çŠ¶æ€å’Œç»“æœçš„ Future åˆ—è¡¨
     */
    <T> List<Future<T>> invokeAll(Collection<? extends Callable<T>> tasks,
                                  long timeout, TimeUnit unit)
        throws InterruptedException;

    /**
     * æ‰§è¡Œç»™å®šçš„ä»»åŠ¡ï¼Œå¦‚æœæŸä¸ªä»»åŠ¡å·²æˆåŠŸå®Œæˆï¼ˆä¹Ÿå°±æ˜¯æœªæŠ›å‡ºå¼‚å¸¸ï¼‰ï¼Œåˆ™è¿”å›å…¶ç»“æœ
     */
    <T> T invokeAny(Collection<? extends Callable<T>> tasks)
        throws InterruptedException, ExecutionException;

    /**
     * æ‰§è¡Œç»™å®šçš„ä»»åŠ¡ï¼Œå¦‚æœåœ¨ç»™å®šçš„è¶…æ—¶æœŸæ»¡å‰æŸä¸ªä»»åŠ¡å·²æˆåŠŸå®Œæˆï¼ˆä¹Ÿå°±æ˜¯æœªæŠ›å‡ºå¼‚å¸¸ï¼‰ï¼Œåˆ™è¿”å›å…¶ç»“æœ
     */
    <T> T invokeAny(Collection<? extends Callable<T>> tasks,
                    long timeout, TimeUnit unit)
        throws InterruptedException, ExecutionException, TimeoutException;
}
```

## 2.3 AbstractExecutorService

`java.util.concurrent.AbstractExecutorService` ï¼ŒæŠ½è±¡ç±»ï¼Œå®ç° ExecutorService æ¥å£ï¼Œä¸ºå…¶æä¾›é»˜è®¤å®ç°ã€‚

AbstractExecutorService é™¤äº†å®ç° ExecutorService æ¥å£å¤–ï¼Œè¿˜æä¾›äº† `#newTaskFor(...)` æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ª RunnableFuture å¯¹è±¡ï¼Œåœ¨è¿è¡Œçš„æ—¶å€™ï¼Œå®ƒå°†è°ƒç”¨åº•å±‚å¯è°ƒç”¨ä»»åŠ¡ï¼Œä½œä¸º Future ä»»åŠ¡ï¼Œå®ƒå°†ç”Ÿæˆå¯è°ƒç”¨çš„ç»“æœä½œä¸ºå…¶ç»“æœï¼Œå¹¶ä¸ºåº•å±‚ä»»åŠ¡æä¾›å–æ¶ˆæ“ä½œã€‚

## 2.4 ScheduledExecutorService

`java.util.concurrent.ScheduledExecutorService` ï¼Œç»§æ‰¿ ExecutorService ï¼Œä¸ºä¸€ä¸ªâ€œå»¶è¿Ÿâ€å’Œâ€œå®šæœŸæ‰§è¡Œâ€çš„ ExecutorService ã€‚ä»–æä¾›äº†å¦‚ä¸‹å‡ ä¸ªæ–¹æ³•ï¼Œå®‰æ’ä»»åŠ¡åœ¨ç»™å®šçš„å»¶æ—¶æ‰§è¡Œæˆ–è€…å‘¨æœŸæ€§æ‰§è¡Œã€‚ä»£ç å¦‚ä¸‹ï¼š

```Java
// åˆ›å»ºå¹¶æ‰§è¡Œåœ¨ç»™å®šå»¶è¿Ÿåå¯ç”¨çš„ ScheduledFutureã€‚
<V> ScheduledFuture<V> schedule(Callable<V> callable, long delay, TimeUnit unit)

// åˆ›å»ºå¹¶æ‰§è¡Œåœ¨ç»™å®šå»¶è¿Ÿåå¯ç”¨çš„ä¸€æ¬¡æ€§æ“ä½œã€‚
ScheduledFuture<?> schedule(Runnable command, long delay, TimeUnit unit)

// åˆ›å»ºå¹¶æ‰§è¡Œä¸€ä¸ªåœ¨ç»™å®šåˆå§‹å»¶è¿Ÿåé¦–æ¬¡å¯ç”¨çš„å®šæœŸæ“ä½œï¼Œåç»­æ“ä½œå…·æœ‰ç»™å®šçš„å‘¨æœŸï¼›
//ä¹Ÿå°±æ˜¯å°†åœ¨ initialDelay åå¼€å§‹æ‰§è¡Œï¼Œç„¶ååœ¨ initialDelay+period åæ‰§è¡Œï¼Œæ¥ç€åœ¨ initialDelay + 2 * period åæ‰§è¡Œï¼Œä¾æ­¤ç±»æ¨ã€‚
ScheduledFuture<?> scheduleAtFixedRate(Runnable command, long initialDelay, long period, TimeUnit unit)

// åˆ›å»ºå¹¶æ‰§è¡Œä¸€ä¸ªåœ¨ç»™å®šåˆå§‹å»¶è¿Ÿåé¦–æ¬¡å¯ç”¨çš„å®šæœŸæ“ä½œï¼Œéšåï¼Œåœ¨æ¯ä¸€æ¬¡æ‰§è¡Œç»ˆæ­¢å’Œä¸‹ä¸€æ¬¡æ‰§è¡Œå¼€å§‹ä¹‹é—´éƒ½å­˜åœ¨ç»™å®šçš„å»¶è¿Ÿã€‚
ScheduledFuture<?> scheduleWithFixedDelay(Runnable command, long initialDelay, long delay, TimeUnit unit)
```

## 2.5 ThreadPoolExecutor

å¤§åé¼é¼çš„â€œçº¿ç¨‹æ± â€ï¼Œåç»­åšè¯¦ç»†ä»‹ç»ã€‚

## 2.6 ScheduledThreadPoolExecutor

`java.util.concurrent.ScheduledThreadPoolExecutor` ï¼Œç»§æ‰¿ ThreadPoolExecutor ï¼Œå¹¶ä¸”å®ç° ScheduledExecutorService æ¥å£ï¼Œæ˜¯ä¸¤è€…çš„é›†å¤§æˆè€…ï¼Œç›¸å½“äºæä¾›äº†â€œå»¶è¿Ÿâ€å’Œâ€œå‘¨æœŸæ‰§è¡Œâ€åŠŸèƒ½çš„ ThreadPoolExecutor ã€‚

## 2.7 Executors

é™æ€å·¥å‚ç±»ï¼Œæä¾›äº† Executorã€ExecutorService ã€ScheduledExecutorServiceã€ThreadFactory ã€Callable ç­‰ç±»çš„é™æ€å·¥å‚æ–¹æ³•ï¼Œé€šè¿‡è¿™äº›å·¥å‚æ–¹æ³•æˆ‘ä»¬å¯ä»¥å¾—åˆ°ç›¸å¯¹åº”çš„å¯¹è±¡ã€‚

1. åˆ›å»ºå¹¶è¿”å›è®¾ç½®æœ‰å¸¸ç”¨é…ç½®å­—ç¬¦ä¸²çš„ ExecutorService çš„æ–¹æ³•ã€‚
2. åˆ›å»ºå¹¶è¿”å›è®¾ç½®æœ‰å¸¸ç”¨é…ç½®å­—ç¬¦ä¸²çš„ ScheduledExecutorService çš„æ–¹æ³•ã€‚
3. åˆ›å»ºå¹¶è¿”å›â€œåŒ…è£…çš„â€ ExecutorService æ–¹æ³•ï¼Œå®ƒé€šè¿‡ä½¿ç‰¹å®šäºå®ç°çš„æ–¹æ³•ä¸å¯è®¿é—®æ¥ç¦ç”¨é‡æ–°é…ç½®ã€‚
4. åˆ›å»ºå¹¶è¿”å› ThreadFactory çš„æ–¹æ³•ï¼Œå®ƒå¯å°†æ–°åˆ›å»ºçš„çº¿ç¨‹è®¾ç½®ä¸ºå·²çŸ¥çš„çŠ¶æ€ã€‚
5. åˆ›å»ºå¹¶è¿”å›éé—­åŒ…å½¢å¼çš„ Callable çš„æ–¹æ³•ï¼Œè¿™æ ·å¯å°†å…¶ç”¨äºéœ€è¦ Callable çš„æ‰§è¡Œæ–¹æ³•ä¸­ã€‚

# 3. Future ä½“ç³»

Future æ¥å£å’Œå®ç° Future æ¥å£çš„ FutureTask ä»£è¡¨äº†çº¿ç¨‹æ± çš„å¼‚æ­¥è®¡ç®—ç»“æœã€‚

AbstractExecutorService æä¾›äº† `#newTaskFor(...)` æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªRunnableFuture å¯¹è±¡ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå½“æˆ‘ä»¬æŠŠä¸€ä¸ª Runnable æˆ–è€… Callable æäº¤ç»™ï¼ˆ submit æ–¹æ³•ï¼‰ThreadPoolExecutor æˆ–è€… ScheduledThreadPoolExecutor æ—¶ï¼Œä»–ä»¬åˆ™ä¼šå‘æˆ‘ä»¬è¿”å›ä¸€ä¸ªFutureTaskå¯¹è±¡ã€‚å¦‚ä¸‹ï¼š

```Java
protected <T> RunnableFuture<T> newTaskFor(Runnable runnable, T value) {
    return new FutureTask<T>(runnable, value);
}

protected <T> RunnableFuture<T> newTaskFor(Callable<T> callable) {
    return new FutureTask<T>(callable);
}

<T> Future<T> submit(Callable<T> task);
<T> Future<T> submit(Runnable task, T result);
Future<> submit(Runnable task);
```

![Future](http://upload-images.jianshu.io/upload_images/2251324-7fc4eec11964a492.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## 3.1 Future

`java.util.concurrent.Future` ï¼Œä½œä¸ºå¼‚æ­¥è®¡ç®—çš„é¡¶å±‚æ¥å£ï¼ŒFuture å¯¹å…·ä½“çš„ Runnable æˆ–è€… Callable ä»»åŠ¡æä¾›äº†ä¸‰ç§æ“ä½œï¼š

* æ‰§è¡Œä»»åŠ¡çš„å–æ¶ˆ
* æŸ¥è¯¢ä»»åŠ¡æ˜¯å¦å®Œæˆ
* è·å–ä»»åŠ¡çš„æ‰§è¡Œç»“æœ

å…¶æ¥å£å®šä¹‰å¦‚ä¸‹ï¼š

```Java
public interface Future<V> {

    /**
     * è¯•å›¾å–æ¶ˆå¯¹æ­¤ä»»åŠ¡çš„æ‰§è¡Œ
     * å¦‚æœä»»åŠ¡å·²å®Œæˆã€æˆ–å·²å–æ¶ˆï¼Œæˆ–è€…ç”±äºæŸäº›å…¶ä»–åŸå› è€Œæ— æ³•å–æ¶ˆï¼Œåˆ™æ­¤å°è¯•å°†å¤±è´¥ã€‚
     * å½“è°ƒç”¨ cancel æ—¶ï¼Œå¦‚æœè°ƒç”¨æˆåŠŸï¼Œè€Œæ­¤ä»»åŠ¡å°šæœªå¯åŠ¨ï¼Œåˆ™æ­¤ä»»åŠ¡å°†æ°¸ä¸è¿è¡Œã€‚
     * å¦‚æœä»»åŠ¡å·²ç»å¯åŠ¨ï¼Œåˆ™ mayInterruptIfRunning å‚æ•°ç¡®å®šæ˜¯å¦åº”è¯¥ä»¥è¯•å›¾åœæ­¢ä»»åŠ¡çš„æ–¹å¼æ¥ä¸­æ–­æ‰§è¡Œæ­¤ä»»åŠ¡çš„çº¿ç¨‹
     */
    boolean cancel(boolean mayInterruptIfRunning);

    /**
     * å¦‚æœåœ¨ä»»åŠ¡æ­£å¸¸å®Œæˆå‰å°†å…¶å–æ¶ˆï¼Œåˆ™è¿”å› true
     */
    boolean isCancelled();

    /**
     * å¦‚æœä»»åŠ¡å·²å®Œæˆï¼Œåˆ™è¿”å› true
     */
    boolean isDone();

    /**
     *   å¦‚æœ‰å¿…è¦ï¼Œç­‰å¾…è®¡ç®—å®Œæˆï¼Œç„¶åè·å–å…¶ç»“æœ
     */
    V get() throws InterruptedException, ExecutionException;

    /**
     * å¦‚æœ‰å¿…è¦ï¼Œæœ€å¤šç­‰å¾…ä¸ºä½¿è®¡ç®—å®Œæˆæ‰€ç»™å®šçš„æ—¶é—´ä¹‹åï¼Œè·å–å…¶ç»“æœï¼ˆå¦‚æœç»“æœå¯ç”¨ï¼‰
     */
    V get(long timeout, TimeUnit unit)
        throws InterruptedException, ExecutionException, TimeoutException;
}
```

## 3.2 RunnableFuture

`java.util.concurrent.RunnableFuture` ï¼Œç»§æ‰¿ Futureã€Runnable ä¸¤ä¸ªæ¥å£ï¼Œä¸ºä¸¤è€…çš„åˆä½“ï¼Œå³æ‰€è°“çš„ Runnable çš„ Future ã€‚æä¾›äº†ä¸€ä¸ª `#run()` æ–¹æ³•ï¼Œå¯ä»¥å®Œæˆ Future å¹¶å…è®¸è®¿é—®å…¶ç»“æœã€‚

```Java
public interface RunnableFuture<V> extends Runnable, Future<V> {
    //åœ¨æœªè¢«å–æ¶ˆçš„æƒ…å†µä¸‹ï¼Œå°†æ­¤ Future è®¾ç½®ä¸ºè®¡ç®—çš„ç»“æœ
    void run();
}
```

## 3.3 FutureTask

`java.util.concurrent.FutureTask` ï¼Œå®ç° RunnableFuture æ¥å£ï¼Œæ—¢å¯ä»¥ä½œä¸º Runnable è¢«æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥ä½œä¸º Future å¾—åˆ° Callable çš„è¿”å›å€¼ã€‚

# 666. å½©è›‹

å¦‚æœä½ å¯¹ Java å¹¶å‘æ„Ÿå…´è¶£ï¼Œæ¬¢è¿åŠ å…¥æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒä¸€èµ·äº¤æµã€‚

![çŸ¥è¯†æ˜Ÿçƒ](http://www.iocoder.cn/images/Architecture/2017_12_29/01.png)

