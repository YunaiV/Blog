title: Tomcat 7.0.42 æºä»£ç è¿è¡Œç¯å¢ƒæ­å»º
date: 2018-01-02
tag: 
categories: Tomcat
permalink: Tomcat/yuliu/build-debugging-environment
author: é¢„æµ
from_url: https://juejin.im/post/5a6c3a28518825732739d7cd
wechat_url: 

-------

æ‘˜è¦: åŸåˆ›å‡ºå¤„ https://juejin.im/post/5a6c3a28518825732739d7cd ã€Œé¢„æµã€æ¬¢è¿è½¬è½½ï¼Œä¿ç•™æ‘˜è¦ï¼Œè°¢è°¢ï¼


-------

![](http://www.iocoder.cn/images/common/wechat_mp_2017_07_31.jpg)

> ğŸ™‚ğŸ™‚ğŸ™‚å…³æ³¨**å¾®ä¿¡å…¬ä¼—å·ï¼šã€èŠ‹é“æºç ã€‘**æœ‰ç¦åˆ©ï¼š
> 1. RocketMQ / MyCAT / Sharding-JDBC **æ‰€æœ‰**æºç åˆ†ææ–‡ç« åˆ—è¡¨
> 2. RocketMQ / MyCAT / Sharding-JDBC **ä¸­æ–‡æ³¨é‡Šæºç  GitHub åœ°å€**
> 3. æ‚¨å¯¹äºæºç çš„ç–‘é—®æ¯æ¡ç•™è¨€**éƒ½**å°†å¾—åˆ°**è®¤çœŸ**å›å¤ã€‚**ç”šè‡³ä¸çŸ¥é“å¦‚ä½•è¯»æºç ä¹Ÿå¯ä»¥è¯·æ•™å™¢**ã€‚
> 4. **æ–°çš„**æºç è§£ææ–‡ç« **å®æ—¶**æ”¶åˆ°é€šçŸ¥ã€‚**æ¯å‘¨æ›´æ–°ä¸€ç¯‡å·¦å³**ã€‚
> 5. **è®¤çœŸçš„**æºç äº¤æµå¾®ä¿¡ç¾¤ã€‚

-------

ã€ŠTomcat 7 æºç åˆ†æã€‹ç³»åˆ—æ–‡ç« æ˜¯æˆ‘ 2013 å¹´åˆ° 2015 å¹´é—´å†™åœ¨ ITeye ä¸Šçš„ç›¸å…³åšå®¢æ±‡æ€»ï¼Œä»åå°çš„è®¿å®¢è®°å½•çœ‹ä¸€ç›´åˆ°ç°åœ¨è¿˜æœ‰å¾ˆå¤šäººåœ¨è¯»ï¼Œä¹Ÿæ˜¯è®¿é—®é‡æœ€å¤šçš„ç³»åˆ—ï¼Œæœ¬æ¥è®¡åˆ’è¦å†™ 8 ç‚¹ï¼š

**1. å®¹å™¨å¯åŠ¨ï¼Œä»serveråˆ°listenerã€jndiã€serviceåˆ°connetorã€engineåˆ°hoståˆ°contextåˆ°wrapperä¸€ç³»åˆ—å¯¹è±¡çš„ç»„è£…ï¼ŒåŒ…æ‹¬Digesterçš„ä½¿ç”¨ã€JMXæ³¨å†Œã€JDK5ä¸­çš„æ–°çš„çº¿ç¨‹æ± å¯åŠ¨æ–¹å¼ç­‰ã€‚**

**2. ä¸€ä¸ªsocketè¿æ¥å¦‚ä½•è½¬åŒ–æˆrequestçš„ã€‚**

**3. ä¸€æ¡è¯·æ±‚å“åº”é“¾åœ¨å®¹å™¨ä¸­æµè½¬çš„ç»è¿‡ã€‚**

4. å®¹å™¨çš„è‡ªå®šä¹‰classloaderæœºåˆ¶ã€‚

5. sessionå¦‚ä½•å®ç°ï¼Œç‰¹åˆ«æ˜¯é›†ç¾¤ç¯å¢ƒä¸­çš„sessionç²˜æ»å’Œsessionå¤åˆ¶çš„å®ç°ã€‚

6. nioå¤„ç†æ–¹å¼çš„å®ç°ã€‚

7. servlet3æ–°è§„èŒƒä¸­websocketçš„å®ç°ã€‚

**8. å®¹å™¨çš„å…³é—­æœºåˆ¶ã€‚**

ç»“æœåªå†™äº† 1ã€2ã€3ã€8 ï¼Œåé¢æœ‰ç©ºå°†å†æŠŠè¿™ä¸ªç³»åˆ—å†™å®Œã€‚æˆ‘æœ€è¿‘ä¹ŸæŠŠåšå®¢çš„é¦–å‘åœ°æ”¹åˆ°äº†æ˜é‡‘ï¼Œä¸ºäº†ä¿æŒè¿™ä¸ªç³»åˆ—çš„å®Œæ•´æ€§ï¼Œå…ˆæŠŠä»¥å‰å†™è¿‡çš„è½¬è¿‡æ¥å§ã€‚

--------------------------------------------------------------------

ä»¥å‰çœ‹è¿‡ Tomcat 5 çš„ä¸€éƒ¨åˆ†æºä»£ç ï¼Œå½“æ—¶åªçœ‹äº†ä¸ªå¤§æ¦‚çš„å¯åŠ¨åˆ†æï¼Œåæ¥çœ‹äº†ã€ŠHow Tomcat Worksã€‹è¿™æœ¬ä¹¦ï¼Œè®²çš„è¿˜è¡Œã€‚ä½†å‡ºç‰ˆçš„è¾ƒæ—©ï¼Œæ‰€ä»¥æ˜¯åŸºäº Tomcat 4 çš„ä»£ç åˆ†æï¼ŒTomcat å·²ç» release åˆ° 7 ï¼ˆ2013å¹´çš„æ—¶å€™ï¼‰äº†ï¼Œå¾ˆå¤šåæ¥æ·»åŠ çš„ç‰¹æ€§ä¸æ–°çš„å®ç°æ–¹å¼é‚£æœ¬ä¹¦é‡Œé¢æ²¡æœ‰æ¶‰åŠã€‚ä¸‹åŠå¹´ä¸šä½™æ—¶é—´çš„ä¸»è¦ä»»åŠ¡å°±æ˜¯å®Œæˆ Tomcat 7 å„ä¸ªæˆ‘æ„Ÿå…´è¶£çš„ç‚¹çš„ç³»åˆ—æ–‡ç« ã€‚



å…ˆè¯´ä¸‹æˆ‘çš„æºç åˆ†æçš„ç¯å¢ƒæ­å»ºå§ï¼Œç”¨çš„æ˜¯ eclipse Juno Service Release 1ï¼Œç„¶ååœ¨ tomcatå®˜ç½‘ä¸‹äº† [tomcat7.0.42çš„æºç ](https://link.juejin.im?target=http%3A%2F%2Ftomcat.apache.org%2Fdownload-70.cgi) ï¼Œè¿™ä¸¤æ ·å‡†å¤‡å¥½ä¹‹åä¾¿æ˜¯æ­å»ºèƒ½å¤Ÿè¿è¡Œæºç çš„è°ƒè¯•ç¯å¢ƒäº†ã€‚

1. åœ¨ eclipse ä¸­æ–°å»ºä¸€ä¸ª java é¡¹ç›®ï¼Œé¡¹ç›®å–å tc7.0.42

![img](https://user-gold-cdn.xitu.io/2018/1/27/16136c2588fab045?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)
 JRE é€‰æ‹© 1.6 çš„

![img](https://user-gold-cdn.xitu.io/2018/1/27/16136c2588835934?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)
 å…¶ä»–è®¾ç½®é»˜è®¤

![img](https://user-gold-cdn.xitu.io/2018/1/27/16136c2588468f8e?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)
 \2. å°†ä¸‹è½½çš„ tomcat æºç åŒ…è§£å‹å¼€ï¼Œå¹¶æ‹·è´åˆ° Eclipse é‡Œæ–°å»ºçš„é¡¹ç›®æ ¹ç›®å½•ä¸‹

![img](https://user-gold-cdn.xitu.io/2018/1/27/16136c2589197992?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)
 æ³¨æ„ï¼Œæˆ‘è¿™é‡Œå°†æºç è§£å‹å¼€åçš„ bin ç›®å½•é‡å‘½åæˆ script ä¹‹åæ‰æ‹·è´çš„ï¼Œå› ä¸ºæ–°å»ºçš„ Java é¡¹ç›®ä¸­é»˜è®¤ç¼–è¯‘åçš„æ–‡ä»¶å­˜æ”¾ç›®å½•æ˜¯ bin ï¼Œè¿™æ ·åšé˜²æ­¢ç¼–è¯‘åçš„æ–‡ä»¶è¦†ç›–åŸæ¥æ‹·è´è¿‡å»çš„å†…å®¹ã€‚

![img](https://user-gold-cdn.xitu.io/2018/1/27/16136c258bceb19a?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)
![img](https://user-gold-cdn.xitu.io/2018/1/27/16136c258b154915?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)
 \3. å°†é¡¹ç›®ä¸­é»˜è®¤çš„ src ç›®å½•åˆ æ‰ï¼Œjava å’Œ test ä½œä¸ºæºç›®å½•

![ç‚¹å‡»æŸ¥çœ‹åŸå§‹å¤§å°å›¾ç‰‡](https://user-gold-cdn.xitu.io/2018/1/27/16136c25b214e520?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)

![ç‚¹å‡»æŸ¥çœ‹åŸå§‹å¤§å°å›¾ç‰‡](https://user-gold-cdn.xitu.io/2018/1/27/16136c25b2a09211?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)
 \4. æ­¤æ—¶ä¼šå‘ç°é¡¹ç›®ä¸­ç¼ºå°‘ä¸€äº›ç±»ï¼Œéœ€è¦æ‰‹åŠ¨å°†ä¾èµ–çš„ jar åŒ…æ·»åŠ è¿›æ¥ï¼Œæ‰€ä»¥æ–°å»ºäº†ä¸€ä¸ª depend-lib ç›®å½•

![img](https://user-gold-cdn.xitu.io/2018/1/27/16136c25b32e0bf3?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)
 \5. å®é™…ä¸Šç¼ºå°‘çš„è¿™äº› jar åŒ… eclipse å®‰è£…ç›®å½•é‡Œé¢éƒ½æœ‰ï¼Œç›´æ¥æ‹·è´è¿‡æ¥å°±å¯ä»¥äº†ã€‚

åœ¨ eclipse å®‰è£…ç›®å½•çš„ plugins ç›®å½•ä¸‹ï¼Œæœç´¢ "ant.jar"

![img](https://user-gold-cdn.xitu.io/2018/1/27/16136c25b3d76e05?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)
 æœç´¢ "javax.wsdl" ï¼Œé€‰ç‰ˆæœ¬è¾ƒé«˜çš„é‚£ä¸ª jar åŒ…

![ç‚¹å‡»æŸ¥çœ‹åŸå§‹å¤§å°å›¾ç‰‡](https://user-gold-cdn.xitu.io/2018/1/27/16136c25db8e5adc?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)
 æœç´¢ "jaxrpc"

![ç‚¹å‡»æŸ¥çœ‹åŸå§‹å¤§å°å›¾ç‰‡](https://user-gold-cdn.xitu.io/2018/1/27/16136c25dbe6cd0c?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)
 æœç´¢ "jdt.core" é€‰æœ€å¤§çš„é‚£ä¸ª jar åŒ…

![ç‚¹å‡»æŸ¥çœ‹åŸå§‹å¤§å°å›¾ç‰‡](https://user-gold-cdn.xitu.io/2018/1/27/16136c25dea344a5?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)
 \6. æŠŠè¿™äº› jar åŒ…åŠ å…¥åˆ°ç¼–è¯‘è·¯å¾„é‡Œ

![img](https://user-gold-cdn.xitu.io/2018/1/27/16136c25df52fd27?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)
 \7. æ­¤æ—¶å‘ç° test ç›®å½•ä¸‹è¿˜æœ‰é”™è¯¯ï¼Œå®é™…ä¸Šæ˜¯å› ä¸º test é‡Œé¢ç”¨åˆ°äº† junit çš„ä¸€äº›æ³¨è§£ï¼Œæ‰€ä»¥éœ€è¦å°† junit4 å¼•è¿›æ¥

å³å‡»é¡¹ç›®ï¼Œç‚¹å‡» Build Path ï¼Œé€‰æ‹© Add Libraries

![img](https://user-gold-cdn.xitu.io/2018/1/27/16136c26092f69a2?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)
 é€‰æ‹© junit

![img](https://user-gold-cdn.xitu.io/2018/1/27/16136c26093f0520?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)
 ä¸‹ä¸€æ­¥ï¼Œjunit ç‰ˆæœ¬é€‰æ‹© JUnit 4

![img](https://user-gold-cdn.xitu.io/2018/1/27/16136c26093848aa?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)


è‡ªæ­¤æ•´ä¸ªé¡¹ç›®åº”è¯¥å¯ä»¥ç¼–è¯‘äº†ã€‚



\8. æ¥ä¸‹æ¥è¿è¡Œé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ build.xml ï¼Œæ‰§è¡Œé»˜è®¤çš„ ant ä»»åŠ¡ï¼Œçœ‹çœ‹é¡¹ç›®æ„å»ºçš„æœ‰æ²¡æœ‰é—®é¢˜ã€‚

![img](https://user-gold-cdn.xitu.io/2018/1/27/16136c260957fda0?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)

![ç‚¹å‡»æŸ¥çœ‹åŸå§‹å¤§å°å›¾ç‰‡](https://user-gold-cdn.xitu.io/2018/1/27/16136c26096999f1?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)


æ§åˆ¶å°è¾“å‡º "BUILD SUCCESSFUL" è¡¨ç¤ºç¼–è¯‘æ„å»ºæˆåŠŸã€‚

![ç‚¹å‡»æŸ¥çœ‹åŸå§‹å¤§å°å›¾ç‰‡](https://user-gold-cdn.xitu.io/2018/1/27/16136c26143c3351?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)


\9. æ­¤æ—¶åˆ·æ–°æ•´ä¸ªé¡¹ç›®ï¼Œä¼šå‘ç°å¤šå‡ºä¸€ä¸ª output ç›®å½•

![img](https://user-gold-cdn.xitu.io/2018/1/27/16136c2636613842?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)


\10. ä¸ºäº†è®©åº”ç”¨è·‘èµ·æ¥ï¼Œå¯ä»¥æ£€æŸ¥ä¸€ä¸‹ output\build\conf ä¸‹æ˜¯å¦å·²ç»æœ‰é…ç½®æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶å®é™…æ˜¯ä»é¡¹ç›®æ ¹è·¯å¾„ conf ç›®å½•ä¸‹æ‹·è´è¿‡æ¥çš„ã€‚



\11. æ‰¾åˆ° BootStarp.java æ–‡ä»¶ï¼ŒDebug å‰åŠ å…¥é»˜è®¤çš„ catalina home è·¯å¾„ä½œä¸ºå¯åŠ¨å‚æ•°ã€‚



BootStarp.java æ–‡ä»¶å³é”®é€‰æ‹© Debug As -> Debug Configurations

![ç‚¹å‡»æŸ¥çœ‹åŸå§‹å¤§å°å›¾ç‰‡](https://user-gold-cdn.xitu.io/2018/1/27/16136c263664f446?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)
è·¯å¾„è®¾ç½®ä¸º output ä¸‹ build çš„ç»å¯¹è·¯å¾„ã€‚æ¯”å¦‚æˆ‘è‡ªå·±çš„æœºå™¨è®¾ç½®çš„å€¼æ˜¯ -Dcatalina.home="E:\workspace\study\tc7.0.42\output\build"

![ç‚¹å‡»æŸ¥çœ‹åŸå§‹å¤§å°å›¾ç‰‡](https://user-gold-cdn.xitu.io/2018/1/27/16136c263679df99?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)