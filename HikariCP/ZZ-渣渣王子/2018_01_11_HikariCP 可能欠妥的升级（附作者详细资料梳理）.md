title: ã€è¿½å…‰è€…ç³»åˆ—ã€‘HikariCP å¯èƒ½æ¬ å¦¥çš„å‡çº§ï¼ˆé™„ä½œè€…è¯¦ç»†èµ„æ–™æ¢³ç†ï¼‰
date: 2018-01-11
tags:
categories: HikariCP
permalink: HikariCP/zhazhawangzi/update
author: æ¸£æ¸£ç‹å­
from_url: https://mp.weixin.qq.com/s/VLtUhY1E4Pz4oS-BeAnOjg
wechat_url:

-------

æ‘˜è¦: åŸåˆ›å‡ºå¤„ https://mp.weixin.qq.com/s/VLtUhY1E4Pz4oS-BeAnOjg ã€Œæ¸£æ¸£ç‹å­ã€æ¬¢è¿è½¬è½½ï¼Œä¿ç•™æ‘˜è¦ï¼Œè°¢è°¢ï¼

- [å¯èƒ½æ¬ å¦¥çš„å‡çº§](http://www.iocoder.cn/HikariCP/zhazhawangzi/update/)
- [ä½œè€…è¯¦ç»†èµ„æ–™æ¢³ç†](http://www.iocoder.cn/HikariCP/zhazhawangzi/update/)

-------

![](http://www.iocoder.cn/images/common/wechat_mp_2017_07_31.jpg)

> ğŸ™‚ğŸ™‚ğŸ™‚å…³æ³¨**å¾®ä¿¡å…¬ä¼—å·ï¼šã€èŠ‹é“æºç ã€‘**æœ‰ç¦åˆ©ï¼š
> 1. RocketMQ / MyCAT / Sharding-JDBC **æ‰€æœ‰**æºç åˆ†ææ–‡ç« åˆ—è¡¨
> 2. RocketMQ / MyCAT / Sharding-JDBC **ä¸­æ–‡æ³¨é‡Šæºç  GitHub åœ°å€**
> 3. æ‚¨å¯¹äºæºç çš„ç–‘é—®æ¯æ¡ç•™è¨€**éƒ½**å°†å¾—åˆ°**è®¤çœŸ**å›å¤ã€‚**ç”šè‡³ä¸çŸ¥é“å¦‚ä½•è¯»æºç ä¹Ÿå¯ä»¥è¯·æ•™å™¢**ã€‚
> 4. **æ–°çš„**æºç è§£ææ–‡ç« **å®æ—¶**æ”¶åˆ°é€šçŸ¥ã€‚**æ¯å‘¨æ›´æ–°ä¸€ç¯‡å·¦å³**ã€‚
> 5. **è®¤çœŸçš„**æºç äº¤æµå¾®ä¿¡ç¾¤ã€‚

-------

# å¯èƒ½æ¬ å¦¥çš„å‡çº§

æœ€è¿‘å¾ˆå¤šä¸šåŠ¡æ–¹æ‰¾æˆ‘å’¨è¯¢hikariCP 3.0.0çš„é—®é¢˜ï¼Œæ¯”å¦‚shutdownæ–¹æ³•æ²¡äº†ä¹‹ç±»ï¼Œæ¯•ç«Ÿæˆ‘å‰æ®µæ—¶é—´è¿˜åœ¨ç ”ç©¶2.6.2ï½2.7.8ç‰ˆæœ¬çš„æºç ï¼Œå¾ˆæ„Ÿå…´è¶£ç¿»äº†ä¸€ä¸‹ï¼Œç¿»å®Œä¹‹åå‘ç°å±…ç„¶å‡çº§åˆ°3.1.0ç‰ˆæœ¬çš„ã€‚

æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹changenote

HikariCP Changes

Changes in 3.1.0

- Add get/setCatalog() to HikariConfigMXBean, allowing the catalog to be changed at runtime.
  The catalog should only be changed while the pool is suspended, and after evicting existing
  connections via HikariPoolMXBean.softEvictConnections().

Changes in 3.0.0

- Removed previously deprecated methods;
  HikariConfig.copyState()
  HikariConfig.getScheduledExecutorService()
  HikariConfig.setScheduledExecutorService()
  HikariConfig.isInitializationFailFast()
  HikariConfig.setInitializationFailFast()
  HikariConfig.isJdbc4ConnectionTest()
  HikariConfig.setJdbc4ConnectionTest()

  HikariDataSource.copyState()
  HikariDataSource.getScheduledExecutorService()
  HikariDataSource.setScheduledExecutorService()
  HikariDataSource.suspendPool()
  HikariDataSource.resumePool()
  HikariDataSource.shutdown()
  HikariDataSource.isInitializationFailFast()
  HikariDataSource.setInitializationFailFast()
  HikariDataSource.isJdbc4ConnectionTest()
  HikariDataSource.setJdbc4ConnectionTest()

- pull 1110 add currently configured maxConnections and minConnections to pool metrics.

- pull 1100 remove hard-coded percentiles for Micrometer metrics.

- pull 1108 maintain a strong reference to PoolStats for Micrometer gauges to prevent premature
  garbage collection.

- pull 1098 update to Micrometer 1.0.0.

Changes in 2.7.8

- fixed 1095 fix breakage caused by sealed configuration with respect to special handling for the
  metricsRegistry and metricsTrackerFactory properties, which are allowed to be altered *once*
  after the pool has started (even after the configuration is sealed).
- pull 1089 allowing anonymous subclasses of MetricRegistry. Changed checks for metrics libraries
  from a class name check to the assignableFrom() API.

Changes in 2.7.7

- fixed issue whereby configuration through the HikariConfigMXBean could not be altered due
  to the sealed configuration change introduced in 2.7.5.

Changes in 2.7.6

- issue 1064 fixed regression where HikariConfig.copyStateTo() propagated the "sealed" status
  of the source configuration to the target configuration -- preventing further changes.

ä¸€èˆ¬æ¥è¯´ï¼Œè¿ç»­ä¸¤æ¬¡å¤§ç‰ˆæœ¬å‡çº§ï¼Œåº”è¯¥æ˜¯æ¯”è¾ƒå¤§çš„æ”¹å˜ï¼Œå¤§ç‰ˆæœ¬æ›´æ–°åªæ˜¯åˆ é™¤äº†å‡ ä¸ªåºŸå¼ƒæ–¹æ³•ï¼Œå¦å¤–MXbeançš„é¸¡è‚‹åŠŸèƒ½ä¹Ÿå‡äº†ä¸€ä¸ªä¸­ç‰ˆæœ¬ã€‚è¿æ¥æ± å°±æ˜¯è¦å¤§é“è‡³ç®€çš„ï¼Œæˆ‘ä¸ªäººè§‰å¾—å³ä½¿ä½œè€…æ²¡å•¥å¯æ›´æ–°çš„äº†ï¼Œä½œä¸ºå¼€æºè½¯ä»¶æˆ–ä¸­é—´ä»¶çš„å¼€å‘æœ€å¥½ä¸è¦è¿™ä¹ˆå†²åŠ¨å‡çº§ç‰ˆæœ¬çš„ã€‚

# ä½œè€…è¯¦ç»†èµ„æ–™æ¢³ç†

https://twitter.com/BrettWooldridge

https://github.com/brettwooldridge

https://stackoverflow.com/users/431356/brettw

https://blog.jooq.org/2017/02/21/jooq-tuesdays-brett-wooldridge-shows-what-it-takes-to-write-the-fastest-java-connection-pool/

# 666. å½©è›‹

å¦‚æœä½ å¯¹ HikariCP æ„Ÿå…´è¶£ï¼Œæ¬¢è¿åŠ å…¥æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒä¸€èµ·äº¤æµã€‚

![çŸ¥è¯†æ˜Ÿçƒ](http://www.iocoder.cn/images/Architecture/2017_12_29/01.png)