title: ç†è§£åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ç¼“å­˜æ¶æ„(ä¸Š)
date: 2018-11-25
tags:
categories: ç²¾è¿›
permalink: Fight/Understand-caching-architecture-in-distributed-systems-1
author: é™ˆå½©å
from_url: https://juejin.im/post/5b42af68f265da0fa12209c3
wechat_url: https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247485722&idx=1&sn=ff6c540ae0c40d8dfbe23837c0bb4591&chksm=fa4976abcd3effbdc09f174e45d3c73cb465203c1f2ae708cf40e1c41fcb5f30bc8df99d7387&token=1908850988&lang=zh_CN#rd

-------

æ‘˜è¦: åŸåˆ›å‡ºå¤„ https://juejin.im/post/5b42af68f265da0fa12209c3 ã€Œé™ˆå½©åã€æ¬¢è¿è½¬è½½ï¼Œä¿ç•™æ‘˜è¦ï¼Œè°¢è°¢ï¼

- [1. ç¼“å­˜æ¦‚è¿°](http://www.iocoder.cn/Fight/Understand-caching-architecture-in-distributed-systems-1/)
- [2. ç¼“å­˜çš„åˆ†ç±»](http://www.iocoder.cn/Fight/Understand-caching-architecture-in-distributed-systems-1/)
  - [2.1 CDNç¼“å­˜](http://www.iocoder.cn/Fight/Understand-caching-architecture-in-distributed-systems-1/)
  - [2.2 åå‘ä»£ç†ç¼“å­˜](http://www.iocoder.cn/Fight/Understand-caching-architecture-in-distributed-systems-1/)
  - [2.3 æœ¬åœ°åº”ç”¨ç¼“å­˜](http://www.iocoder.cn/Fight/Understand-caching-architecture-in-distributed-systems-1/)
  - [2.4 åˆ†å¸ƒå¼ç¼“å­˜](http://www.iocoder.cn/Fight/Understand-caching-architecture-in-distributed-systems-1/)
  - [2.4 åˆ†å¸ƒå¼ç¼“å­˜](http://www.iocoder.cn/Fight/Understand-caching-architecture-in-distributed-systems-1/)
- [å‚è€ƒ](http://www.iocoder.cn/Fight/Understand-caching-architecture-in-distributed-systems-1/)

-------

![](http://www.iocoder.cn/images/common/wechat_mp_2017_07_31.jpg)

> ğŸ™‚ğŸ™‚ğŸ™‚å…³æ³¨**å¾®ä¿¡å…¬ä¼—å·ï¼šã€èŠ‹é“æºç ã€‘**æœ‰ç¦åˆ©ï¼š
> 1. RocketMQ / MyCAT / Sharding-JDBC **æ‰€æœ‰**æºç åˆ†ææ–‡ç« åˆ—è¡¨
> 2. RocketMQ / MyCAT / Sharding-JDBC **ä¸­æ–‡æ³¨é‡Šæºç  GitHub åœ°å€**
> 3. æ‚¨å¯¹äºæºç çš„ç–‘é—®æ¯æ¡ç•™è¨€**éƒ½**å°†å¾—åˆ°**è®¤çœŸ**å›å¤ã€‚**ç”šè‡³ä¸çŸ¥é“å¦‚ä½•è¯»æºç ä¹Ÿå¯ä»¥è¯·æ•™å™¢**ã€‚
> 4. **æ–°çš„**æºç è§£ææ–‡ç« **å®æ—¶**æ”¶åˆ°é€šçŸ¥ã€‚**æ¯å‘¨æ›´æ–°ä¸€ç¯‡å·¦å³**ã€‚
> 5. **è®¤çœŸçš„**æºç äº¤æµå¾®ä¿¡ç¾¤ã€‚

-------

æœ¬æ–‡ä¸»è¦ä»‹ç»å¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ç¼“å­˜çš„ç›¸å…³ç†è®ºï¼Œå¸¸è§çš„ç¼“å­˜ç»„ä»¶ä»¥åŠåº”ç”¨åœºæ™¯ã€‚

# 1. ç¼“å­˜æ¦‚è¿°



![ç¼“å­˜æ¦‚è¿°](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d42d3347b0?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



# 2. ç¼“å­˜çš„åˆ†ç±»

ç¼“å­˜ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å››ç±»

![ç¼“å­˜çš„åˆ†ç±»](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d42cff29f5?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



## 2.1 CDNç¼“å­˜

### åŸºæœ¬ä»‹ç»

CDN(Content Delivery Network å†…å®¹åˆ†å‘ç½‘ç»œ)çš„åŸºæœ¬åŸç†æ˜¯å¹¿æ³›é‡‡ç”¨å„ç§ç¼“å­˜æœåŠ¡å™¨ï¼Œå°†è¿™äº›ç¼“å­˜æœåŠ¡å™¨åˆ†å¸ƒåˆ°ç”¨æˆ·è®¿é—®ç›¸å¯¹é›†ä¸­çš„åœ°åŒºæˆ–ç½‘ç»œä¸­ï¼Œåœ¨ç”¨æˆ·è®¿é—®ç½‘ç«™æ—¶ï¼Œåˆ©ç”¨å…¨å±€è´Ÿè½½æŠ€æœ¯å°†ç”¨æˆ·çš„è®¿é—®æŒ‡å‘è·ç¦»æœ€è¿‘çš„å·¥ä½œæ­£å¸¸çš„ç¼“å­˜æœåŠ¡å™¨ä¸Šï¼Œç”±ç¼“å­˜æœåŠ¡å™¨ç›´æ¥å“åº”ç”¨æˆ·è¯·æ±‚

### åº”ç”¨åœºæ™¯

ä¸»è¦ç¼“å­˜é™æ€èµ„æºï¼Œä¾‹å¦‚å›¾ç‰‡ï¼Œè§†é¢‘

### åº”ç”¨å›¾



![æœªä½¿ç”¨CDNç¼“å­˜](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d42d64a4da?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)





![ä½¿ç”¨CDNç¼“å­˜](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d42c9e586d?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



### ä¼˜ç‚¹



![ä¼˜ç‚¹](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d42cbdd9df?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



## 2.2 åå‘ä»£ç†ç¼“å­˜

### åŸºæœ¬ä»‹ç»

åå‘ä»£ç†ä½äºåº”ç”¨æœåŠ¡å™¨æœºæˆ¿ï¼Œå¤„ç†æ‰€æœ‰å¯¹WEBæœåŠ¡å™¨çš„è¯·æ±‚ã€‚ å¦‚æœç”¨æˆ·è¯·æ±‚çš„é¡µé¢åœ¨ä»£ç†æœåŠ¡å™¨ä¸Šæœ‰ç¼“å†²çš„è¯ï¼Œä»£ç†æœåŠ¡å™¨ç›´æ¥å°†ç¼“å†²å†…å®¹å‘é€ç»™ç”¨æˆ·ã€‚å¦‚æœæ²¡æœ‰ç¼“å†²åˆ™å…ˆå‘WEBæœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œå–å›æ•°æ®ï¼Œæœ¬åœ°ç¼“å­˜åå†å‘é€ç»™ç”¨æˆ·ã€‚é€šè¿‡é™ä½å‘WEBæœåŠ¡å™¨çš„è¯·æ±‚æ•°ï¼Œä»è€Œé™ä½äº†WEBæœåŠ¡å™¨çš„è´Ÿè½½ã€‚

### åº”ç”¨åœºæ™¯

ä¸€èˆ¬åªç¼“å­˜ä½“ç§¯è¾ƒå°é™æ€æ–‡ä»¶èµ„æºï¼Œå¦‚cssã€jsã€å›¾ç‰‡

### åº”ç”¨å›¾



![åå‘ä»£ç†ç¼“å­˜åº”ç”¨å›¾](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d455b0bef0?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



### å¼€æºå®ç°



![å¼€æºå®ç°](https://user-gold-cdn.xitu.io/2018/7/9/1647e46aa24ca7a7?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



## 2.3 æœ¬åœ°åº”ç”¨ç¼“å­˜

### åŸºæœ¬ä»‹ç»

æŒ‡çš„æ˜¯åœ¨åº”ç”¨ä¸­çš„ç¼“å­˜ç»„ä»¶ï¼Œå…¶æœ€å¤§çš„ä¼˜ç‚¹æ˜¯åº”ç”¨å’Œcacheæ˜¯åœ¨åŒä¸€ä¸ªè¿›ç¨‹å†…éƒ¨ï¼Œè¯·æ±‚ç¼“å­˜éå¸¸å¿«é€Ÿï¼Œæ²¡æœ‰è¿‡å¤šçš„ç½‘ç»œå¼€é”€ç­‰ï¼Œåœ¨å•åº”ç”¨ä¸éœ€è¦é›†ç¾¤æ”¯æŒæˆ–è€…é›†ç¾¤æƒ…å†µä¸‹å„èŠ‚ç‚¹æ— éœ€äº’ç›¸é€šçŸ¥çš„åœºæ™¯ä¸‹ä½¿ç”¨æœ¬åœ°ç¼“å­˜è¾ƒåˆé€‚ï¼› åŒæ—¶ï¼Œå®ƒçš„ç¼ºç‚¹ä¹Ÿæ˜¯åº”ä¸ºç¼“å­˜è·Ÿåº”ç”¨ç¨‹åºè€¦åˆï¼Œå¤šä¸ªåº”ç”¨ç¨‹åºæ— æ³•ç›´æ¥çš„å…±äº«ç¼“å­˜ï¼Œå„åº”ç”¨æˆ–é›†ç¾¤çš„å„èŠ‚ç‚¹éƒ½éœ€è¦ç»´æŠ¤è‡ªå·±çš„å•ç‹¬ç¼“å­˜ï¼Œå¯¹å†…å­˜æ˜¯ä¸€ç§æµªè´¹ã€‚

### åº”ç”¨åœºæ™¯

ç¼“å­˜å­—å…¸ç­‰å¸¸ç”¨æ•°æ®

### ç¼“å­˜ä»‹è´¨



![ç¼“å­˜ä»‹è´¨](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d462ac95cc?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



### å®ç°

#### ç¼–ç¨‹ç›´æ¥å®ç°



![ç¼–ç¨‹ç›´æ¥å®ç°](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d455d869a4?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



#### Ehcache

##### åŸºæœ¬ä»‹ç»

Ehcacheæ˜¯ä¸€ç§åŸºäºæ ‡å‡†çš„å¼€æºç¼“å­˜ï¼Œå¯æé«˜æ€§èƒ½ï¼Œå¸è½½æ•°æ®åº“å¹¶ç®€åŒ–å¯ä¼¸ç¼©æ€§ã€‚ å®ƒæ˜¯ä½¿ç”¨æœ€å¹¿æ³›çš„åŸºäºJavaçš„ç¼“å­˜ï¼Œå› ä¸ºå®ƒåŠŸèƒ½å¼ºå¤§ï¼Œç»è¿‡éªŒè¯ï¼ŒåŠŸèƒ½é½å…¨ï¼Œå¹¶ä¸å…¶ä»–æµè¡Œçš„åº“å’Œæ¡†æ¶é›†æˆã€‚Ehcacheå¯ä»¥ä»è¿›ç¨‹å†…ç¼“å­˜æ‰©å±•åˆ°ä½¿ç”¨TBçº§ç¼“å­˜çš„æ··åˆè¿›ç¨‹å†…/è¿›ç¨‹å¤–éƒ¨ç½²

##### åº”ç”¨åœºæ™¯



![Ehcacheåº”ç”¨åœºæ™¯](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d464311a44?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



##### Ehcacheæ¶æ„å›¾



![Ehcacheæ¶æ„å›¾](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d469fe59db?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



##### Ehcacheä¸»è¦ç‰¹å¾



![Ehcacheä¸»è¦ç‰¹å¾](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d47039f5d8?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



##### Ehcacheç¼“å­˜æ•°æ®è¿‡æœŸç­–ç•¥



![ç¼“å­˜æ•°æ®è¿‡æœŸç­–ç•¥.png](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d472689a03?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



##### Ehcacheè¿‡æœŸæ•°æ®æ·˜æ±°æœºåˆ¶

**æ‡’æ·˜æ±°æœºåˆ¶**ï¼šæ¯æ¬¡å¾€ç¼“å­˜æ”¾å…¥æ•°æ®çš„æ—¶å€™ï¼Œéƒ½ä¼šå­˜ä¸€ä¸ªæ—¶é—´ï¼Œåœ¨è¯»å–çš„æ—¶å€™è¦å’Œè®¾ç½®çš„æ—¶é—´åšTTLæ¯”è¾ƒæ¥åˆ¤æ–­æ˜¯å¦è¿‡æœŸ

#### Guava Cache

## 2.4 åˆ†å¸ƒå¼ç¼“å­˜

##### åŸºæœ¬ä»‹ç»

Guava Cacheæ˜¯Googleå¼€æºçš„Javaé‡ç”¨å·¥å…·é›†åº“Guavaé‡Œçš„ä¸€æ¬¾ç¼“å­˜å·¥å…·

##### ç‰¹ç‚¹ä¸åŠŸèƒ½



![Guava Cacheç‰¹ç‚¹ä¸åŠŸèƒ½.png](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d477d892c0?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



##### åº”ç”¨åœºæ™¯



![Guava Cacheåº”ç”¨åœºæ™¯.png](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d488385909?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



##### æ•°æ®ç»“æ„å›¾



![Guava Cacheæ•°æ®ç»“æ„å›¾](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d489d9e142?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)





![Guava Cacheç»“æ„ç‰¹ç‚¹.png](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d49505e52c?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



##### ç¼“å­˜æ›´æ–°ç­–ç•¥



![Guava Cache ç¼“å­˜æ›´æ–°ç­–ç•¥](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d49d5aac3f?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



##### ç¼“å­˜å›æ”¶ç­–ç•¥



![Guava Cacheç¼“å­˜å›æ”¶ç­–ç•¥.png](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d4a657389c?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



## 2.4 åˆ†å¸ƒå¼ç¼“å­˜

æŒ‡çš„æ˜¯ä¸åº”ç”¨åˆ†ç¦»çš„ç¼“å­˜ç»„ä»¶æˆ–æœåŠ¡ï¼Œå…¶æœ€å¤§çš„ä¼˜ç‚¹æ˜¯è‡ªèº«å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åº”ç”¨ï¼Œä¸æœ¬åœ°åº”ç”¨éš”ç¦»ï¼Œå¤šä¸ªåº”ç”¨å¯ç›´æ¥çš„å…±äº«ç¼“å­˜ã€‚

ä¸»è¦åº”ç”¨åœºæ™¯

![åˆ†å¸ƒå¼ç¼“å­˜åº”ç”¨åœºæ™¯.png](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d4b3ff7aed?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



ä¸»è¦æ¥å…¥æ–¹å¼

![åˆ†å¸ƒå¼ç¼“å­˜æ¥å…¥æ–¹å¼.png](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d4b4da577c?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



ä¸‹é¢ä»‹ç»åˆ†å¸ƒå¼ç¼“å­˜å¸¸è§çš„2å¤§å¼€æºå®ç°Memcachedå’ŒRedis

### Memcached

#### åŸºæœ¬ä»‹ç»

Memcachedæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ï¼Œåˆ†å¸ƒå¼å†…å­˜å¯¹è±¡ç¼“å­˜ç³»ç»Ÿï¼Œé€šè¿‡åœ¨å†…å­˜é‡Œç»´æŠ¤ä¸€ä¸ªç»Ÿä¸€çš„å·¨å¤§çš„hashè¡¨ï¼Œå®ƒèƒ½å¤Ÿç”¨æ¥å­˜å‚¨å„ç§æ ¼å¼çš„æ•°æ®ï¼ŒåŒ…æ‹¬å›¾åƒã€è§†é¢‘ã€æ–‡ä»¶ä»¥åŠæ•°æ®åº“æ£€ç´¢çš„ç»“æœç­‰ã€‚ç®€å•çš„è¯´å°±æ˜¯å°†æ•°æ®è°ƒç”¨åˆ°å†…å­˜ä¸­ï¼Œç„¶åä»å†…å­˜ä¸­è¯»å–ï¼Œä»è€Œå¤§å¤§æé«˜è¯»å–é€Ÿåº¦ã€‚

#### ç‰¹ç‚¹



![Memcachedç‰¹ç‚¹](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d4be370b20?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



#### åŸºæœ¬æ¶æ„



![MemcachedåŸºæœ¬æ¶æ„](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d4c5e259ac?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



#### ç¼“å­˜æ•°æ®è¿‡æœŸç­–ç•¥

**LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰åˆ°æœŸå¤±æ•ˆç­–ç•¥**ï¼Œåœ¨Memcachedå†…å­˜å‚¨æ•°æ®é¡¹æ—¶ï¼Œå¯ä»¥æŒ‡å®šå®ƒåœ¨ç¼“å­˜çš„å¤±æ•ˆæ—¶é—´ï¼Œé»˜è®¤ä¸ºæ°¸ä¹…ã€‚å½“MemcachedæœåŠ¡å™¨ç”¨å®Œåˆ†é…çš„å†…æ—¶ï¼Œå¤±æ•ˆçš„æ•°æ®è¢«é¦–å…ˆæ›¿æ¢ï¼Œç„¶åä¹Ÿæ˜¯æœ€è¿‘æœªä½¿ç”¨çš„æ•°æ®ã€‚

#### æ•°æ®æ·˜æ±°å†…éƒ¨å®ç°

**æ‡’æ·˜æ±°æœºåˆ¶**ï¼šæ¯æ¬¡å¾€ç¼“å­˜æ”¾å…¥æ•°æ®çš„æ—¶å€™ï¼Œéƒ½ä¼šå­˜ä¸€ä¸ªæ—¶é—´ï¼Œåœ¨è¯»å– çš„æ—¶å€™è¦å’Œè®¾ç½®çš„æ—¶é—´åšTTLæ¯”è¾ƒæ¥åˆ¤æ–­æ˜¯å¦è¿‡æœŸ

#### åˆ†å¸ƒå¼é›†ç¾¤å®ç°

æœåŠ¡ç«¯å¹¶æ²¡æœ‰ â€œ åˆ†å¸ƒå¼ â€ åŠŸèƒ½ã€‚æ¯ä¸ªæœåŠ¡å™¨éƒ½æ˜¯å®Œå…¨ç‹¬ç«‹å’Œéš”ç¦»çš„æœåŠ¡ã€‚ Memcachedçš„åˆ†å¸ƒå¼ï¼Œæ˜¯ç”±å®¢æˆ·ç«¯ç¨‹åºå®ç°çš„



![æ•°æ®è¯»å†™æµç¨‹å›¾](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d4c638087f?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)





![Memcachedåˆ†å¸ƒå¼é›†ç¾¤å®ç°](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d4c9774572?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



### Redis

#### åŸºæœ¬ä»‹ç»

**Redisæ˜¯ä¸€ä¸ªè¿œç¨‹å†…å­˜æ•°æ®åº“ï¼ˆéå…³ç³»å‹æ•°æ®åº“ï¼‰**ï¼Œæ€§èƒ½å¼ºåŠ²ï¼Œå…·æœ‰å¤åˆ¶ç‰¹æ€§ä»¥åŠè§£å†³é—®é¢˜è€Œç”Ÿçš„ç‹¬ä¸€æ— äºŒçš„æ•°æ®æ¨¡å‹ã€‚å®ƒå¯ä»¥å­˜å‚¨é”®å€¼å¯¹ä¸5ç§ä¸åŒç±»å‹çš„å€¼ä¹‹é—´çš„æ˜ å°„ï¼Œå¯ä»¥å°†å­˜å‚¨åœ¨å†…å­˜çš„é”®å€¼å¯¹æ•°æ®æŒä¹…åŒ–åˆ°ç¡¬ç›˜ï¼Œå¯ä»¥ä½¿ç”¨å¤åˆ¶ç‰¹æ€§æ¥æ‰©å±•è¯»æ€§èƒ½ï¼Œ Redisè¿˜å¯ä»¥ä½¿ç”¨å®¢æˆ·ç«¯åˆ†ç‰‡æ¥æ‰©å±•å†™æ€§èƒ½ã€‚å†…ç½®äº† å¤åˆ¶ï¼ˆreplicationï¼‰ï¼ŒLUAè„šæœ¬ï¼ˆLua scriptingï¼‰ï¼ŒLRUé©±åŠ¨äº‹ä»¶ï¼ˆLRU evictionï¼‰ï¼Œäº‹åŠ¡ï¼ˆtransactionsï¼‰ å’Œä¸åŒçº§åˆ«çš„ ç£ç›˜æŒä¹…åŒ–ï¼ˆpersistenceï¼‰ï¼Œ å¹¶é€šè¿‡ Rediså“¨å…µï¼ˆSentinelï¼‰å’Œè‡ªåŠ¨åˆ†åŒºï¼ˆClusterï¼‰æä¾›é«˜å¯ç”¨æ€§ï¼ˆhigh availabilityï¼‰ã€‚

#### æ•°æ®æ¨¡å‹



![Redisæ•°æ®æ¨¡å‹](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d4cc28ecda?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



#### æ•°æ®æ·˜æ±°ç­–ç•¥



![Redisæ•°æ®æ·˜æ±°ç­–ç•¥](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d4f1079209?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



#### æ•°æ®æ·˜æ±°å†…éƒ¨å®ç°



![Redisæ•°æ®æ·˜æ±°å†…éƒ¨å®ç°.png](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d4f1138be4?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



#### æŒä¹…åŒ–æ–¹å¼



![RedisæŒä¹…åŒ–æ–¹å¼](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d4f628a495?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



#### åº•å±‚å®ç°éƒ¨åˆ†è§£æ

- å¯åŠ¨çš„éƒ¨åˆ†è¿‡ç¨‹å›¾è§£

  ![å¯åŠ¨çš„éƒ¨åˆ†è¿‡ç¨‹](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d4fe3064e2?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)

- serverç«¯æŒä¹…åŒ–çš„éƒ¨åˆ†æ“ä½œå›¾è§£

  ![serverç«¯æŒä¹…åŒ–çš„éƒ¨åˆ†æ“ä½œ](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d504918a50?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)

- åº•å±‚å“ˆå¸Œè¡¨å®ç°(æ¸è¿›å¼Rehash)

**åˆå§‹åŒ–å­—å…¸**

![åˆå§‹åŒ–å­—å…¸](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d505f11eba?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



**æ–°å¢å­—å…¸å…ƒç´ å›¾è§£**

![æ–°å¢å­—å…¸å…ƒç´ å›¾è§£](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d51dc3a779?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



**Rehashæ‰§è¡Œæµç¨‹**

![Rehashæ‰§è¡Œæµç¨‹](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d521b845d5?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



#### ç¼“å­˜è®¾è®¡åŸåˆ™



![Redisç¼“å­˜è®¾è®¡åŸåˆ™.png](https://user-gold-cdn.xitu.io/2018/7/9/1647c7d521bb9ff9?imageView2/0/w/1280/h/960/format/jpeg/ignore-error/1)



### Redisä¸Memcachedæ¯”è¾ƒ

|                | Redis                                                        | Memcached                                                    |
| -------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| æ”¯æŒçš„æ•°æ®ç»“æ„ | å“ˆå¸Œã€åˆ—è¡¨ã€é›†åˆã€æœ‰åºé›†åˆ                                   | çº¯kev-value                                                  |
| æŒä¹…åŒ–æ”¯æŒ     | æœ‰                                                           | æ—                                                            |
| é«˜å¯ç”¨æ”¯æŒ     | rediså¤©ç„¶æ”¯æŒé›†ç¾¤åŠŸèƒ½ï¼Œå¯ä»¥å®ç°ä¸»åŠ¨å¤åˆ¶ï¼Œè¯»å†™åˆ†ç¦»ã€‚å®˜æ–¹ä¹Ÿæä¾›äº†sentinelé›†ç¾¤ç®¡ç†å·¥å…·ï¼Œèƒ½å¤Ÿå®ç°ä¸»ä»æœåŠ¡ç›‘æ§ï¼Œæ•…éšœè‡ªåŠ¨è½¬ç§»ï¼Œè¿™ä¸€åˆ‡ï¼Œå¯¹äºå®¢æˆ·ç«¯éƒ½æ˜¯é€æ˜çš„ï¼Œæ— éœ€ç¨‹åºæ”¹åŠ¨ï¼Œä¹Ÿæ— éœ€äººå·¥ä»‹å…¥ | éœ€è¦äºŒæ¬¡å¼€å‘                                                 |
| å­˜å‚¨valueå®¹é‡  | æœ€å¤§512M                                                     | æœ€å¤§1M                                                       |
| å†…å­˜åˆ†é…       | ä¸´æ—¶ç”³è¯·ç©ºé—´ï¼Œå¯èƒ½å¯¼è‡´ç¢ç‰‡                                   | é¢„åˆ†é…å†…å­˜æ± çš„æ–¹å¼ç®¡ç†å†…å­˜ï¼Œèƒ½å¤Ÿçœå»å†…å­˜åˆ†é…æ—¶é—´             |
| è™šæ‹Ÿå†…å­˜ä½¿ç”¨   | æœ‰è‡ªå·±çš„VMæœºåˆ¶ï¼Œç†è®ºä¸Šèƒ½å¤Ÿå­˜å‚¨æ¯”ç‰©ç†å†…å­˜æ›´å¤šçš„æ•°æ®ï¼Œå½“æ•°æ®è¶…é‡æ—¶ï¼Œä¼šå¼•å‘swapï¼ŒæŠŠå†·æ•°æ®åˆ·åˆ°ç£ç›˜ä¸Š | æ‰€æœ‰çš„æ•°æ®å­˜å‚¨åœ¨ç‰©ç†å†…å­˜é‡Œ                                   |
| ç½‘ç»œæ¨¡å‹       | éé˜»å¡IOå¤ç”¨æ¨¡å‹,æä¾›ä¸€äº›éKVå­˜å‚¨ä¹‹å¤–çš„æ’åºï¼ŒèšåˆåŠŸèƒ½ï¼Œåœ¨æ‰§è¡Œè¿™äº›åŠŸèƒ½æ—¶ï¼Œå¤æ‚çš„CPUè®¡ç®—ï¼Œä¼šé˜»å¡æ•´ä¸ªIOè°ƒåº¦ | éé˜»å¡IOå¤ç”¨æ¨¡å‹                                             |
| æ°´å¹³æ‰©å±•çš„æ”¯æŒ | æš‚æ—                                                          | æš‚æ—                                                          |
| å¤šçº¿ç¨‹         | Redisæ”¯æŒå•çº¿ç¨‹                                              | Memcachedæ”¯æŒå¤šçº¿ç¨‹,CPUåˆ©ç”¨æ–¹é¢Memcacheä¼˜äºRedis             |
| è¿‡æœŸç­–ç•¥       | æœ‰ä¸“é—¨çº¿ç¨‹ï¼Œæ¸…é™¤ç¼“å­˜æ•°æ®                                     | æ‡’æ·˜æ±°æœºåˆ¶ï¼šæ¯æ¬¡å¾€ç¼“å­˜æ”¾å…¥æ•°æ®çš„æ—¶å€™ï¼Œéƒ½ä¼šå­˜ä¸€ä¸ªæ—¶é—´ï¼Œåœ¨è¯»å–çš„æ—¶å€™è¦å’Œè®¾ç½®çš„æ—¶é—´åšTTLæ¯”è¾ƒæ¥åˆ¤æ–­æ˜¯å¦è¿‡æœŸ |
| å•æœºQPS        | çº¦10W                                                        | çº¦60W                                                        |
| æºä»£ç å¯è¯»æ€§   | ä»£ç æ¸…çˆ½ç®€æ´                                                 | èƒ½æ˜¯è€ƒè™‘äº†å¤ªå¤šçš„æ‰©å±•æ€§ï¼Œå¤šç³»ç»Ÿçš„å…¼å®¹æ€§ï¼Œä»£ç ä¸æ¸…çˆ½           |
| **é€‚ç”¨åœºæ™¯**   | å¤æ‚æ•°æ®ç»“æ„ã€æœ‰æŒä¹…åŒ–ã€é«˜å¯ç”¨éœ€æ±‚ã€valueå­˜å‚¨å†…å®¹è¾ƒå¤§        | çº¯KVï¼Œæ•°æ®é‡éå¸¸å¤§ï¼Œå¹¶å‘é‡éå¸¸å¤§çš„ä¸šåŠ¡                       |

ä¸‹ä¸€ç¯‡ [ã€Šç†è§£åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ç¼“å­˜æ¶æ„(ä¸‹)ã€‹](https://link.juejin.im?target=https%3A%2F%2Fjuejin.im%2Fpost%2F5b42b0096fb9a04fbd1b093b)å°†ä»‹ç»ç¼“å­˜æ¶æ„è®¾è®¡å¸¸è§é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆï¼Œä¸šç•Œæ¡ˆä¾‹ã€‚

(æœ¬æ–‡åŒæ—¶å‘è¡¨äºä½œè€…ä¸ªäººåšå®¢ [www.jianshu.com/u/ced6b70c7â€¦](https://link.juejin.im?target=https%3A%2F%2Fwww.jianshu.com%2Fu%2Fced6b70c7fc5))

# å‚è€ƒ

[ä»0å¼€å§‹å­¦æ¶æ„ â€”â€” Alibaba æè¿å ](https://link.juejin.im?target=https%3A%2F%2Ftime.geekbang.org%2Fcolumn%2Fintro%2F81%3Fcode%3DOK4eM0TBPTKGPRCzcZdzIeXjPACLfY3KCzATXOSWzXE%253D)

[Javaæ ¸å¿ƒæŠ€æœ¯36è®²â€”â€” Oracle æ¨æ™“å³°](https://link.juejin.im?target=https%3A%2F%2Ftime.geekbang.org%2Fcolumn%2Fintro%2F82%3Fcode%3Dw8EZ6RGOQApZJ5tpAzP8dRzeVHxZ4q%252FfOdSbSZzbkhc%253D)

[åˆ†æRedisæ¶æ„è®¾è®¡  â€”â€”ä¸Šå¸ç¦åŒº](https://link.juejin.im?target=https%3A%2F%2Fblog.csdn.net%2Fa600423444%2Farticle%2Fdetails%2F8944601%23commentBox)

[Memcachedå®˜æ–¹æ–‡æ¡£](https://link.juejin.im?target=https%3A%2F%2Fgithub.com%2Fmemcached%2Fmemcached%2Fwiki%2FOverview)

[redisçš„æŒä¹…åŒ–æ–¹å¼RDBå’ŒAOFçš„åŒºåˆ« â€”â€” 58æ²ˆå‰‘](https://link.juejin.im?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FDwAwR1a5GcjdldpMykofDQ)

[ç¼“å­˜ï¼Œä½ çœŸçš„ç”¨å¯¹äº†ä¹ˆï¼Ÿ â€”â€” 58æ²ˆå‰‘](https://link.juejin.im?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FP4zaM8RvV4jehByx51tkaw)

[é€‰redisè¿˜æ˜¯memcachedï¼Œæºç æ€ä¹ˆè¯´ï¼Ÿ â€”â€” 58æ²ˆå‰‘](https://link.juejin.im?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FhOdwK2-7_S7_fi-KVu9_OQ)

[ç¼“å­˜é‚£äº›äº‹ â€”â€” ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ](https://link.juejin.im?target=https%3A%2F%2Ftech.meituan.com%2Fcache_about.html)

[Redis ç¼“å­˜è®¾è®¡åŸåˆ™â€”â€” é›ªé£é¸¿](https://link.juejin.im?target=https%3A%2F%2Fwww.cnblogs.com%2FCwj-XFH%2Fp%2F8998600.html)

[Redisçš„ç¼“å­˜ç­–ç•¥å’Œä¸»é”®å¤±æ•ˆæœºåˆ¶  â€”â€”é‚´è¶Š](https://link.juejin.im?target=https%3A%2F%2Fwww.cnblogs.com%2Fbinyue%2Fp%2F3726842.html)