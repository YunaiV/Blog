title: ã€è®¾è®¡æ¨¡å¼è¯»ä¹¦ç¬”è®°ã€‘è£…é¥°è€…æ¨¡å¼
date: 2018-01-11
tags:
categories: è®¾è®¡æ¨¡å¼
permalink: DesignPattern/xiaomingge/Decorator-Pattern
author: å°æ˜å“¥
from_url: http://www.cnblogs.com/chenssy/archive/2013/05/23/3094138.html
wechat_url:

-------

æ‘˜è¦: åŸåˆ›å‡ºå¤„ http://www.cnblogs.com/chenssy/archive/2013/05/23/3094138.html ã€Œå°æ˜å“¥ã€æ¬¢è¿è½¬è½½ï¼Œä¿ç•™æ‘˜è¦ï¼Œè°¢è°¢ï¼

- [ä¸€ã€åŸºæœ¬å®šä¹‰](http://www.iocoder.cn/DesignPattern/xiaomingge/Decorator-Pattern/)
- [äºŒã€æ¨¡å¼ç»“æ„](http://www.iocoder.cn/DesignPattern/xiaomingge/Decorator-Pattern/)
- [ä¸‰ã€å®ç°è£…é¥°è€…æ¨¡å¼](http://www.iocoder.cn/DesignPattern/xiaomingge/Decorator-Pattern/)
- [å››ã€è£…é¥°è€…æ¨¡å¼çš„ä¼˜ç¼ºç‚¹](http://www.iocoder.cn/DesignPattern/xiaomingge/Decorator-Pattern/)
  - [ä¼˜ç‚¹](http://www.iocoder.cn/DesignPattern/xiaomingge/Decorator-Pattern/)
  - [ç¼ºç‚¹](http://www.iocoder.cn/DesignPattern/xiaomingge/Decorator-Pattern/)
- [äº”ã€è£…é¥°è€…æ¨¡å¼çš„é€‚ç”¨åœºæ™¯](http://www.iocoder.cn/DesignPattern/xiaomingge/Decorator-Pattern/)
- [å…­ã€æ€»ç»“](http://www.iocoder.cn/DesignPattern/xiaomingge/Decorator-Pattern/)

-------

![](http://www.iocoder.cn/images/common/wechat_mp_2017_07_31.jpg)

> ğŸ™‚ğŸ™‚ğŸ™‚å…³æ³¨**å¾®ä¿¡å…¬ä¼—å·ï¼šã€èŠ‹é“æºç ã€‘**æœ‰ç¦åˆ©ï¼š
> 1. RocketMQ / MyCAT / Sharding-JDBC **æ‰€æœ‰**æºç åˆ†ææ–‡ç« åˆ—è¡¨
> 2. RocketMQ / MyCAT / Sharding-JDBC **ä¸­æ–‡æ³¨é‡Šæºç  GitHub åœ°å€**
> 3. æ‚¨å¯¹äºæºç çš„ç–‘é—®æ¯æ¡ç•™è¨€**éƒ½**å°†å¾—åˆ°**è®¤çœŸ**å›å¤ã€‚**ç”šè‡³ä¸çŸ¥é“å¦‚ä½•è¯»æºç ä¹Ÿå¯ä»¥è¯·æ•™å™¢**ã€‚
> 4. **æ–°çš„**æºç è§£ææ–‡ç« **å®æ—¶**æ”¶åˆ°é€šçŸ¥ã€‚**æ¯å‘¨æ›´æ–°ä¸€ç¯‡å·¦å³**ã€‚
> 5. **è®¤çœŸçš„**æºç äº¤æµå¾®ä¿¡ç¾¤ã€‚

-------

â€‹        æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ç§æ–¹å¼ç»™ä¸€ä¸ªç±»æˆ–è€…å¯¹è±¡æ·»åŠ è¡Œä¸ºã€‚

â€‹        ä¸€æ˜¯ä½¿ç”¨ç»§æ‰¿ã€‚ç»§æ‰¿æ˜¯ç»™ä¸€ä¸ªç±»æ·»åŠ è¡Œä¸ºçš„æ¯”è¾ƒæœ‰æ•ˆçš„é€”å¾„ã€‚é€šè¿‡ä½¿ç”¨ç»§æ‰¿ï¼Œå¯ä»¥ä½¿å¾—å­ç±»åœ¨æ‹¥æœ‰è‡ªèº«æ–¹æ³•çš„åŒæ—¶ï¼Œè¿˜å¯ä»¥æ‹¥æœ‰çˆ¶ç±»çš„æ–¹æ³•ã€‚ä½†æ˜¯ä½¿ç”¨ç»§æ‰¿æ˜¯é™æ€çš„ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™å°±å·²ç»å†³å®šäº†å­ç±»çš„è¡Œä¸ºï¼Œæˆ‘ä»¬ä¸ä¾¿äºæ§åˆ¶å¢åŠ è¡Œä¸ºçš„æ–¹å¼å’Œæ—¶æœºã€‚

â€‹        äºŒæ˜¯ä½¿ç”¨å…³è”ã€‚ç»„åˆå³å°†ä¸€ä¸ªå¯¹è±¡åµŒå…¥åˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œç”±å¦ä¸€ä¸ªå¯¹è±¡æ¥å†³å®šæ˜¯å¦å¼•ç”¨è¯¥å¯¹è±¡æ¥æ‰©å±•è‡ªå·±çš„è¡Œä¸ºã€‚è¿™æ˜¯ä¸€ç§åŠ¨æ€çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­åŠ¨æ€çš„æ§åˆ¶ã€‚

â€‹        ä¸ç»§æ‰¿ç›¸æ¯”ï¼Œå…³è”å…³ç³»çš„ä¼˜åŠ¿å°±åœ¨äºä¸ä¼šç ´åç±»çš„å°è£…æ€§ï¼Œä¸”å…·æœ‰è¾ƒå¥½çš„æ¾è€¦åˆæ€§ï¼Œå¯ä»¥ä½¿ç³»ç»Ÿæ›´åŠ å®¹æ˜“ç»´æŠ¤ã€‚ä½†æ˜¯å®ƒçš„ç¼ºç‚¹å°±åœ¨äºè¦åˆ›å»ºæ¯”ç»§æ‰¿æ›´å¤šçš„å¯¹è±¡ã€‚

# ä¸€ã€åŸºæœ¬å®šä¹‰

â€‹        è£…é¥°è€…æ¨¡å¼ï¼ŒåŠ¨æ€åœ°å°†è´£ä»»é™„åŠ åˆ°å¯¹è±¡ä¸Šã€‚è‹¥è¦æ‰©å±•åŠŸèƒ½ï¼Œè£…é¥°è€…æä¾›äº†æ¯”ç»§æ‰¿æ›´åŠ æœ‰å¼¹æ€§çš„æ›¿ä»£æ–¹æ¡ˆã€‚

# äºŒã€æ¨¡å¼ç»“æ„

â€‹        è£…é¥°è€…æ¨¡å¼UMLç»“æ„å›¾ã€‚

![img](http://www.iocoder.cn/images/DegisnPattern/xiaomingge/20130522103956376)

â€‹        Component: æŠ½è±¡æ„ä»¶ã€‚æ˜¯å®šä¹‰ä¸€ä¸ªå¯¹è±¡æ¥å£ï¼Œå¯ä»¥ç»™è¿™äº›å¯¹è±¡åŠ¨æ€åœ°æ·»åŠ èŒè´£ã€‚

â€‹        ConcreteComponent:å…·ä½“æ„ä»¶ã€‚æ˜¯å®šä¹‰äº†ä¸€ä¸ªå…·ä½“çš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ç»™è¿™ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›èŒè´£ã€‚

â€‹        Decorator: æŠ½è±¡è£…é¥°ç±»ã€‚æ˜¯è£…é¥°æŠ½è±¡ç±»ï¼Œç»§æ‰¿äº†Component,ä»å¤–ç±»æ¥æ‰©å±•Componentç±»çš„åŠŸèƒ½ï¼Œä½†å¯¹äºComponentæ¥è¯´ï¼Œæ˜¯æ— éœ€çŸ¥é“Decoratorå­˜åœ¨çš„ã€‚

â€‹        ConcreteDecorator:å…·ä½“è£…é¥°ç±»ï¼Œèµ·åˆ°ç»™Componentæ·»åŠ èŒè´£çš„åŠŸèƒ½ã€‚



# ä¸‰ã€å®ç°è£…é¥°è€…æ¨¡å¼

â€‹        æƒ…æ™¯æ¨¡å¼ï¼šæ˜Ÿå·´å…¹ä»¥æ‰©å¼ é€Ÿåº¦å¿«è€Œé—»åã€‚åœ¨é‡Œé¢è´­ä¹°å’–å•¡æ—¶ï¼Œå¯ä»¥è¦æ±‚åœ¨å…¶ä¸­åŠ å…¥å„ç§è°ƒæ–™ï¼Œæ˜Ÿå·´å…¹ä¼šæ ¹æ®æ‰€åŠ å…¥çš„è°ƒæ–™æ”¶å–ä¸åŒçš„è´¹ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸åŒçš„å’–å•¡ä¸è°ƒæ–™ä¹‹é—´æœ‰Nå¤šä¸åŒçš„ç»„åˆæ–¹å¼ã€‚æ¯ç§å’–å•¡å’Œè°ƒæ–™éƒ½æœ‰ä¸åŒçš„æ”¶è´¹ã€‚å¦‚æœè¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä½¿ç”¨ç»§æ‰¿æ–¹å¼ï¼Œåˆ™ä¼šé™·å…¥æ— ä»¥å¤åŠ çš„åœ°æ­¥ã€‚è¿™é‡Œä¼šæœ‰Nå¤šä¸ªç±»ï¼Œå‡ºç°â€œç±»çˆ†ç‚¸â€ç°è±¡ã€‚

â€‹        ç»“æ„å›¾å¦‚ä¸‹ï¼š

![img](http://www.iocoder.cn/images/DegisnPattern/xiaomingge/20130522104050765)

â€‹        è£…é¥°è€…æ¨¡å¼æä¾›äº†ä¸€ä¸ªæ¯”è¾ƒå¥½çš„è§£å†³æ–¹æ¡ˆã€‚

![img](http://www.iocoder.cn/images/DegisnPattern/xiaomingge/20130522104107517)

ç¼–ç å®ç°ï¼š

â€‹        Component  Beverage.java

```Java
1. public abstract class Beverage {
2. â€‹    protected String description = "Unknown Beverage";
3.
4. â€‹    public String getDescription() {
5. â€‹        return description;
6. â€‹    }
7.
8. â€‹    public abstract double cost();
9. }
```

â€‹        å››ä¸ªç»„ä»¶ï¼šHouseBlend.java

```Java
1. public class HouseBlend extends Beverage {
2.
3. â€‹    public HouseBlend(){
4. â€‹        description = "HouseBlend";
5. â€‹    }
6. â€‹
7. â€‹    @Override
8. â€‹    public double cost() {
9. â€‹        return 0.89;
10. â€‹    }
11.
12. }
```

â€‹        DarkRoast.java

```Java
1. public class DarkRoast extends Beverage {
2. â€‹    public DarkRoast(){
3. â€‹        description = "DarkRoast";
4. â€‹    }
5. â€‹    @Override
6. â€‹    public double cost() {
7. â€‹        return 1.05;
8. â€‹    }
9.
10. }
```

â€‹        Espresso.java

```Java
1. public class DarkRoast extends Beverage {
2. â€‹    public DarkRoast(){
3. â€‹        description = "DarkRoast";
4. â€‹    }
5. â€‹    @Override
6. â€‹    public double cost() {
7. â€‹        return 1.05;
8. â€‹    }
9.
10. }
```

â€‹        Decat.java

```Java
1. public Decat(){
2. â€‹    description = "Decat";
3. }
4. â€‹
5. @Override
6. public double cost() {
7. â€‹    return 0.99;
8. }
```

â€‹        CondimentDecorator.java

```Java
1. public abstract class CondimentDecorator extends Beverage{
2. â€‹    public abstract String getDescription();
3. }
```

â€‹        Milk.java

```Java
1. public class Milk extends CondimentDecorator {
2. â€‹    Beverage beverage;
3. â€‹
4. â€‹    public Milk(Beverage beverage){
5. â€‹        this.beverage = beverage;
6. â€‹    }
7. â€‹
8. â€‹    @Override
9. â€‹    public String getDescription() {
10. â€‹        return beverage.getDescription() + " , Milk";
11. â€‹    }
12.
13. â€‹    @Override
14. â€‹    public double cost() {
15. â€‹        return beverage.cost() + 0.3;
16. â€‹    }
17. }
```
â€‹        Mocha.java

```Java
1. public class Mocha extends CondimentDecorator {
2. â€‹    Beverage beverage;
3. â€‹    public Mocha(Beverage beverage){
4. â€‹        this.beverage = beverage;
5. â€‹    }
6. â€‹
7. â€‹    @Override
8. â€‹    public String getDescription() {
9. â€‹        return beverage.getDescription() + " , Mocha";
10. â€‹    }
11.
12. â€‹    @Override
13. â€‹    public double cost() {
14. â€‹        return beverage.cost() + 0.20;
15. â€‹    }
16.
17. }
```
â€‹        Soy.java

1. public class Soy extends CondimentDecorator{
2. â€‹    Beverage beverage;
3. â€‹    public Soy(Beverage beverage) {
4. â€‹        this.beverage = beverage;
5. â€‹    }
6. â€‹    @Override
7. â€‹    public String getDescription() {
8. â€‹        return beverage.getDescription() + " , Soy";
9. â€‹    }
10.
11. â€‹    @Override
12. â€‹    public double cost() {
13. â€‹        return beverage.cost() + 0.10;
14. â€‹    }
15.
16. }

â€‹        Whip.java

```Java
1. public class Whip extends CondimentDecorator {
2. â€‹    Beverage beverage;
3. â€‹    public Whip(Beverage beverage){
4. â€‹        this.beverage = beverage;
5. â€‹    }
6. â€‹    @Override
7. â€‹    public String getDescription() {
8. â€‹        return beverage.getDescription() + " , Whip";
9. â€‹    }
10.
11. â€‹    @Override
12. â€‹    public double cost() {
13. â€‹        return beverage.cost() + 0.20;
14. â€‹    }
15.
16. }
```
â€‹        æµ‹è¯•ç¨‹åº

```Java
1. public class StarbuzzCoffee {
2.
3. â€‹    /
4. â€‹     * @param args
5. â€‹     */
6. â€‹    public static void main(String[] args) {
7. â€‹        Beverage beverage = new Espresso();
8. â€‹        System.out.println(beverage.getDescription() + " $" + beverage.cost());
9. â€‹
10. â€‹        Beverage beverage2 = new DarkRoast();
11. â€‹        beverage2 = new Mocha(beverage2);
12. â€‹        beverage2 = new Mocha(beverage2);
13. â€‹        beverage2 = new Whip(beverage2);
14. â€‹        System.out.println(beverage2.getDescription() + " $" + beverage2.cost());
15. â€‹    }
16.
17. }
```
â€‹        è¿è¡Œç»“æœ

![img](http://www.iocoder.cn/images/DegisnPattern/xiaomingge/20130522105137869)

# å››ã€è£…é¥°è€…æ¨¡å¼çš„ä¼˜ç¼ºç‚¹

## ä¼˜ç‚¹

1ã€è£…é¥°è€…æ¨¡å¼å¯ä»¥æä¾›æ¯”ç»§æ‰¿æ›´å¤šçš„çµæ´»æ€§

â€‹2ã€å¯ä»¥é€šè¿‡ä¸€ç§åŠ¨æ€çš„æ–¹å¼æ¥æ‰©å±•ä¸€ä¸ªå¯¹è±¡çš„åŠŸèƒ½ï¼Œåœ¨è¿è¡Œæ—¶é€‰æ‹©ä¸åŒçš„è£…é¥°å™¨ï¼Œä»è€Œå®ç°ä¸åŒçš„è¡Œä¸ºã€‚

3ã€é€šè¿‡ä½¿ç”¨ä¸åŒçš„å…·ä½“è£…é¥°ç±»ä»¥åŠè¿™äº›è£…é¥°ç±»çš„æ’åˆ—ç»„åˆï¼Œå¯ä»¥åˆ›é€ å‡ºå¾ˆå¤šä¸åŒè¡Œä¸ºçš„ç»„åˆã€‚å¯ä»¥ä½¿ç”¨å¤šä¸ªå…·ä½“è£…é¥°ç±»æ¥è£…é¥°åŒä¸€å¯¹è±¡ï¼Œå¾—åˆ°åŠŸèƒ½æ›´ä¸ºå¼ºå¤§çš„å¯¹è±¡ã€‚

4ã€å…·ä½“æ„ä»¶ç±»ä¸å…·ä½“è£…é¥°ç±»å¯ä»¥ç‹¬ç«‹å˜åŒ–ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦å¢åŠ æ–°çš„å…·ä½“æ„ä»¶ç±»å’Œå…·ä½“è£…é¥°ç±»ï¼Œåœ¨ä½¿ç”¨æ—¶å†å¯¹å…¶è¿›è¡Œç»„åˆï¼ŒåŸæœ‰ä»£ç æ— é¡»æ”¹å˜ï¼Œç¬¦åˆâ€œå¼€é—­åŸåˆ™â€ã€‚



## ç¼ºç‚¹

1ã€ä¼šäº§ç”Ÿå¾ˆå¤šçš„å°å¯¹è±¡ï¼Œå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚æ€§

2ã€è¿™ç§æ¯”ç»§æ‰¿æ›´åŠ çµæ´»æœºåŠ¨çš„ç‰¹æ€§ï¼Œä¹ŸåŒæ—¶æ„å‘³ç€è£…é¥°æ¨¡å¼æ¯”ç»§æ‰¿æ›´åŠ æ˜“äºå‡ºé”™ï¼Œæ’é”™ä¹Ÿå¾ˆå›°éš¾ï¼Œå¯¹äºå¤šæ¬¡è£…é¥°çš„å¯¹è±¡ï¼Œè°ƒè¯•æ—¶å¯»æ‰¾é”™è¯¯å¯èƒ½éœ€è¦é€çº§æ’æŸ¥ï¼Œè¾ƒä¸ºçƒ¦çã€‚



# äº”ã€è£…é¥°è€…æ¨¡å¼çš„é€‚ç”¨åœºæ™¯

â€‹1ã€åœ¨ä¸å½±å“å…¶ä»–å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œä»¥åŠ¨æ€ã€é€æ˜çš„æ–¹å¼ç»™å•ä¸ªå¯¹è±¡æ·»åŠ èŒè´£ã€‚

2ã€éœ€è¦åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡å¢åŠ åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½ä¹Ÿå¯ä»¥åŠ¨æ€åœ°è¢«æ’¤é”€ã€‚  å½“ä¸èƒ½é‡‡ç”¨ç»§æ‰¿çš„æ–¹å¼å¯¹ç³»ç»Ÿè¿›è¡Œæ‰©å……æˆ–è€…é‡‡ç”¨ç»§æ‰¿ä¸åˆ©äºç³»ç»Ÿæ‰©å±•å’Œç»´æŠ¤æ—¶ã€‚

# å…­ã€æ€»ç»“

1ã€ ç»„åˆå’Œå§”æ‰˜å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€çš„æ·»åŠ æ–°çš„è¡Œä¸ºï¼Œè€Œç»§æ‰¿æ˜¯é™æ€çš„ï¼Œåœ¨ç³»ç»Ÿç¼–è¯‘æ—¶å°±å·²ç»å†³å®šäº†å¯¹è±¡çš„è¡Œä¸ºã€‚

2ã€è£…é¥°è€…æ¨¡å¼æ„å‘³ç€ä¸€ç¾¤è£…é¥°è€…ç±»ï¼Œè¿™äº›ç±»ç”¨æ¥åŒ…è£…å…·ä½“ç»„ä»¶

3ã€è£…é¥°è€…å¯ä»¥åœ¨è¢«è£…é¥°è€…çš„è¡Œä¸ºå‰é¢æˆ–è€…åé¢åŠ ä¸Šè‡ªå·±çš„è¡Œä¸ºï¼Œç”šè‡³å¯ä»¥å°†è¢«è£…é¥°è€…çš„è¡Œä¸ºæ•´ä¸ªå–ä»£æ‰ï¼Œä»è€Œè¾¾åˆ°ç‰¹å®šçš„ç›®çš„ã€‚

4ã€å¯ä»¥ç”¨å¤šä¸ªè£…é¥°è€…åŒ…è£…ä¸€ä¸ªç»„ä»¶ã€‚

5ã€è£…é¥°è€…ä¸€èˆ¬å¯¹äºç»„ä»¶çš„å®¢æˆ·æ˜¯é€æ˜çš„ï¼Œé™¤éå®¢æˆ·ç¨‹åºä¾èµ–äºç»„ä»¶çš„å…·ä½“ç±»å‹ã€‚

6ã€è£…é¥°è€…ä¼šå¯¼è‡´è®¾è®¡ä¸­å‡ºç°è®¸å¤šçš„å°å¯¹è±¡ï¼Œå¦‚æœè¿‡åº¦çš„ä½¿ç”¨ï¼Œä¼šè®©ç³»ç»Ÿå˜å¾—æ›´åŠ å¤æ‚ã€‚

7ã€è£…é¥°è€…å’Œè¢«è£…é¥°è€…å¯¹è±¡æœ‰ç›¸åŒçš„è¶…ç±»å‹ã€‚

# 666. å½©è›‹

å¦‚æœä½ å¯¹ è®¾è®¡æ¨¡å¼ æ„Ÿå…´è¶£ï¼Œæ¬¢è¿åŠ å…¥æˆ‘çš„çŸ¥è¯†ä¸€èµ·äº¤æµã€‚

![çŸ¥è¯†æ˜Ÿçƒ](http://www.iocoder.cn/images/Architecture/2017_12_29/01.png)